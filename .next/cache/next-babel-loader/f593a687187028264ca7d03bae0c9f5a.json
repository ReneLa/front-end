{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation DELETE_HOUSE_MUTATION($id: ID!) {\\n    deleteHouse(id: $id) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { Avatar, Dialog, DialogActions, DialogContent, DialogTitle, Popover, Slide } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport BathIcon from \"@material-ui/icons/Bathtub\";\nimport DeleteIcon from \"@material-ui/icons/DeleteOutline\";\nimport AddIcon from \"@material-ui/icons/MoreHoriz\";\nimport BedIcon from \"@material-ui/icons/SingleBed\";\nimport gql from \"graphql-tag\";\nimport Link from \"next/link\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { GET_USER_HOUSES } from \"../queryComponents/landlord/LandlordHouses\";\nimport { CaptionText, CommandButton, Container, IconButton, PrimaryButton, SubHeader, SubText } from \"../styledComponents\";\nimport { PAGINATION_QUERY } from \"./houses/index\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    small: {\n      width: theme.spacing(4),\n      height: theme.spacing(4),\n      borderRadius: 0\n    },\n    popoverPaper: {\n      display: \"flex\",\n      padding: 0,\n      marginLeft: 0,\n      marginRight: 0,\n      borderRadius: 0\n    }\n  };\n});\nvar HouseWrapper = styled(Container).withConfig({\n  displayName: \"HouseItem__HouseWrapper\",\n  componentId: \"sc-1dgxdk8-0\"\n})([\"display:flex;flex-direction:column;padding-top:10px;padding-left:15px;padding-right:15px;height:300px;min-width:250px;max-width:250px;margin-right:10px;position:relative;margin-bottom:20px;border-radius:2px;background-color:white;cursor:pointer;&:hover{box-shadow:0 3.2px 7.2px 0 rgba(0,0,0,0.132),0 0.6px 1.8px 0 rgba(0,0,0,0.108);}\"]);\nvar Tag = styled(Container).withConfig({\n  displayName: \"HouseItem__Tag\",\n  componentId: \"sc-1dgxdk8-1\"\n})([\"flex:1;align-items:center;justify-content:center;border-radius:10px;padding:5px;margin-right:5px;\"]);\nvar CardHeader = styled(Container).withConfig({\n  displayName: \"HouseItem__CardHeader\",\n  componentId: \"sc-1dgxdk8-2\"\n})([\"direction:flex;flex-direction:row;width:100%;align-items:center;background-color:transparent;\"]);\nvar ImageWrapper = styled(Container).withConfig({\n  displayName: \"HouseItem__ImageWrapper\",\n  componentId: \"sc-1dgxdk8-3\"\n})([\"direction:flex;flex-direction:row;flex:0;width:100%;background-color:transparent;padding-top:5px;padding-left:0px;padding-right:0px;padding-bottom:10px;\", \"\"], function (props) {\n  return props.customStyles;\n});\nvar PopContainer = styled(Container).withConfig({\n  displayName: \"HouseItem__PopContainer\",\n  componentId: \"sc-1dgxdk8-4\"\n})([\"display:flex;flex:1;border-radius:1px;box-shadow:0 1.6px 3.6px 0 rgba(0,0,0,0.132),0 0.3px 0.9px 0 rgba(0,0,0,0.108);\", \"\"], function (props) {\n  return props.customStyles;\n});\nvar CancelBtn = styled(PrimaryButton).withConfig({\n  displayName: \"HouseItem__CancelBtn\",\n  componentId: \"sc-1dgxdk8-5\"\n})([\"border:none;color:\", \";background-color:transparent;&:hover{background-color:\", \";}\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.primaryDark;\n}, function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.lightGrey;\n});\nvar PopListItem = styled(CommandButton).withConfig({\n  displayName: \"HouseItem__PopListItem\",\n  componentId: \"sc-1dgxdk8-6\"\n})([\"display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:8px 10px;\"]);\nvar DELETE_HOUSE_MUTATION = gql(_templateObject());\nvar Transition = React.forwardRef(function Transition(props, ref) {\n  return __jsx(Slide, _extends({\n    direction: \"up\",\n    ref: ref\n  }, props));\n});\n\nvar DeleteHouse = function DeleteHouse(_ref3) {\n  var closePopover = _ref3.closePopover,\n      house = _ref3.house;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      open = _React$useState2[0],\n      setOpen = _React$useState2[1];\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var onCompletion = function onCompletion() {\n    handleClose();\n    closePopover();\n  };\n\n  var _useMutation = useMutation(DELETE_HOUSE_MUTATION, {\n    variables: {\n      id: house.id\n    },\n    refetchQueries: [{\n      query: GET_USER_HOUSES\n    }, {\n      query: PAGINATION_QUERY\n    }],\n    onCompleted: onCompletion\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      deleteHouse = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      data = _useMutation2$.data,\n      loading = _useMutation2$.loading;\n\n  return __jsx(\"div\", null, __jsx(PopListItem, {\n    type: \"button\",\n    onClick: function onClick() {\n      handleClickOpen();\n    }\n  }, __jsx(DeleteIcon, {\n    style: {\n      color: \"red\",\n      fontSize: 20,\n      marginRight: 6\n    }\n  }), \"Delete\"), __jsx(Dialog, {\n    open: open,\n    TransitionComponent: Transition,\n    keepMounted: true,\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-slide-title\",\n    \"aria-describedby\": \"alert-dialog-slide-description\"\n  }, __jsx(DialogTitle, {\n    id: \"alert-dialog-slide-title\",\n    style: {\n      fontSize: 20\n    }\n  }, \"You are about to delete this house?\"), __jsx(DialogContent, null, __jsx(Container, {\n    row: true,\n    center: true,\n    color: \"transparent\",\n    customStyles: {\n      marginTop: 15,\n      marginBottom: 15\n    }\n  }, __jsx(SubText, {\n    customStyles: {\n      marginRight: 10\n    }\n  }, \"House: \"), __jsx(SubHeader, {\n    customStyles: {\n      fontSize: 17\n    }\n  }, house.house_heading))), __jsx(DialogActions, null, __jsx(CancelBtn, {\n    onClick: function onClick() {\n      handleClose();\n      closePopover();\n    }\n  }, \"Cancel\"), __jsx(PrimaryButton, {\n    onClick: function onClick() {\n      deleteHouse();\n    },\n    type: \"button\",\n    customStyles: {\n      backgroundColor: \"#E74C3C\",\n      border: \"none\"\n    }\n  }, loading ? \"Deleting\" : \"Delete\"))));\n};\n\nvar HouseItem = function HouseItem(_ref4) {\n  var house = _ref4.house;\n  var classes = useStyles();\n  var images = house.images,\n      countryId = house.countryId,\n      provinceId = house.provinceId,\n      districtId = house.districtId,\n      appliances = house.appliances,\n      utilities = house.utilities;\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      anchorEl = _React$useState4[0],\n      setAnchorEl = _React$useState4[1];\n\n  var handlePopoverOpen = function handlePopoverOpen(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handlePopoverClose = function handlePopoverClose() {\n    setAnchorEl(null);\n  };\n\n  var open = Boolean(anchorEl);\n  return __jsx(\"div\", null, __jsx(Link, {\n    style: {\n      flex: 0\n    },\n    href: {\n      pathname: \"/Landlrd/houses/[id]\",\n      query: {\n        id: house.id\n      }\n    },\n    as: \"/Landlrd/houses/\".concat(house.id)\n  }, __jsx(\"a\", {\n    style: {\n      textDecoration: \"none\",\n      flex: 0\n    }\n  }, __jsx(HouseWrapper, null, __jsx(CardHeader, null, house.profileImage !== null && __jsx(Avatar, {\n    src: house.profileImage,\n    className: classes.small\n  }), house.profileImage === null && __jsx(\"div\", {\n    className: classes.small\n  }), __jsx(Container, {\n    flex: 1,\n    column: true,\n    color: \"transparent\",\n    customStyles: {\n      paddingLeft: 10,\n      paddingRight: 10\n    }\n  }, __jsx(SubHeader, {\n    customStyles: {\n      fontSize: \"18px\",\n      fontWeight: \"500\"\n    }\n  }, house.house_heading), __jsx(CaptionText, {\n    customStyles: {\n      color: \"#0078D4\"\n    }\n  }, countryId.name + \" ,\" + districtId.name)), __jsx(Container, {\n    flex: false,\n    color: \"transparent\"\n  }, __jsx(IconButton, {\n    customStyles: {\n      border: \"1px solid #E1E1E1\",\n      height: 33,\n      width: 33\n    },\n    onMouseEnter: handlePopoverOpen\n  }, __jsx(AddIcon, {\n    style: {\n      fontSize: 18\n    }\n  })))), __jsx(ImageWrapper, null, images.length <= 0 && __jsx(Container, {\n    center: true,\n    middle: true,\n    flex: 1,\n    color: \"transparent\",\n    customStyles: {\n      width: 90,\n      height: 90\n    }\n  }, __jsx(Avatar, {\n    style: {\n      width: 70,\n      height: 70,\n      borderRadius: 70 / 2,\n      backgroundColor: \"#F2F3F4\"\n    }\n  }, __jsx(SubHeader, null, \" \", house.house_heading.charAt(0))))), __jsx(ImageWrapper, null, images.map(function (img) {\n    return __jsx(Container, {\n      flex: 1,\n      key: img.id\n    }, __jsx(Avatar, {\n      src: img.image,\n      style: {\n        width: \"100%\",\n        height: 90,\n        borderRadius: 0\n      }\n    }));\n  })), __jsx(Container, {\n    color: \"transparent\",\n    column: true\n  }, __jsx(Container, {\n    flex: 1,\n    row: true,\n    color: \"transparent\",\n    customStyles: {\n      marginBottom: 7\n    }\n  }, __jsx(Container, {\n    flex: 1,\n    column: true,\n    middle: true,\n    color: \"transparent\",\n    customStyles: {\n      paddingRight: 10\n    }\n  }, __jsx(Container, {\n    color: \"transparent\",\n    row: true,\n    center: true,\n    space: \"space-between\"\n  }, __jsx(CaptionText, {\n    customStyles: {\n      fontSize: 10\n    }\n  }, \"BEDROOMS\"), __jsx(BedIcon, {\n    style: {\n      fontSize: 18\n    }\n  })), __jsx(SubText, {\n    customStyles: {\n      fontWeight: \"600\",\n      color: \"#ED6161\",\n      fontSize: 16\n    }\n  }, house.no_bedrooms)), __jsx(Container, {\n    flex: 1,\n    column: true,\n    middle: true,\n    color: \"transparent\"\n  }, __jsx(Container, {\n    color: \"transparent\",\n    row: true,\n    center: true,\n    space: \"space-between\"\n  }, __jsx(CaptionText, {\n    customStyles: {\n      fontSize: 10\n    }\n  }, \"BATHROOMS\"), __jsx(BathIcon, {\n    style: {\n      fontSize: 15\n    }\n  })), __jsx(SubText, {\n    customStyles: {\n      fontWeight: \"600\",\n      color: \"#00BCCA\",\n      fontSize: 16\n    }\n  }, house.no_bathrooms))), __jsx(Container, {\n    flex: 1,\n    row: true,\n    color: \"transparent\"\n  }, __jsx(Container, {\n    flex: 1,\n    column: true,\n    middle: true,\n    color: \"transparent\",\n    customStyles: {\n      paddingTop: 10\n    }\n  }, __jsx(Container, {\n    color: \"transparent\",\n    row: true,\n    center: true,\n    space: \"space-between\"\n  }, __jsx(CaptionText, {\n    customStyles: {\n      fontSize: 10\n    }\n  }, \"Utilities\")), __jsx(Container, {\n    row: true,\n    center: true,\n    color: \"transparent\"\n  }, utilities.map(function (util, i) {\n    return __jsx(Container, {\n      flex: 0,\n      key: i,\n      row: true,\n      center: true,\n      middle: true,\n      customStyles: {\n        paddingLeft: 5,\n        paddingRight: 5,\n        borderRadius: 5,\n        marginRight: 3\n      }\n    }, __jsx(\"span\", null, util));\n  }))), __jsx(Container, {\n    flex: 1,\n    column: true,\n    middle: true,\n    color: \"transparent\"\n  }, __jsx(Container, {\n    color: \"transparent\",\n    row: true,\n    center: true,\n    space: \"space-between\"\n  }, __jsx(CaptionText, {\n    customStyles: {\n      fontSize: 10\n    }\n  }, \"Appliances\")), __jsx(Container, {\n    row: true,\n    center: true,\n    color: \"transparent\"\n  }, appliances.map(function (util, i) {\n    return __jsx(Container, {\n      flex: 0,\n      key: i,\n      row: true,\n      center: true,\n      middle: true,\n      customStyles: {\n        paddingLeft: 5,\n        paddingRight: 5,\n        borderRadius: 5,\n        marginRight: 3\n      }\n    }, __jsx(\"span\", null, util));\n  })))))))), __jsx(Popover, {\n    id: \"mouse-over-popover\",\n    open: open,\n    anchorEl: anchorEl,\n    onClose: handlePopoverClose,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    elevation: 0,\n    classes: {\n      paper: classes.popoverPaper\n    },\n    disableRestoreFocus: true\n  }, __jsx(PopContainer, null, __jsx(DeleteHouse, {\n    closePopover: handlePopoverClose,\n    house: house\n  }))));\n};\n\nexport default HouseItem;","map":null,"metadata":{},"sourceType":"module"}