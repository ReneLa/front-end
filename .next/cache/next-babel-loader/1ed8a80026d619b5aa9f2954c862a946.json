{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_LANDLORD_MUTATION(\\n    $firstName: String!\\n    $lastName: String!\\n    $tel_no: String\\n    $reason: String\\n    $street: String\\n  ) {\\n    createLandlord(\\n      firstName: $firstName\\n      lastName: $lastName\\n      tel_no: $tel_no\\n      reason: $reason\\n      street: $street\\n    ) {\\n      id\\n      firstName\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { useMutation } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport React, { useState } from \"react\";\nimport { ApolloConsumer } from \"react-apollo\";\nimport styled from \"styled-components\";\nimport hasLogo from \"../../public/static/HAS.png\";\nimport { GET_COUNTRIES } from \"../queryComponents/Countries\";\nimport { GET_DISTRICTS_IN_PROVINCE } from \"../queryComponents/Districts\";\nimport { GET_PROVINCES_IN_COUNTRY } from \"../queryComponents/Provinces\";\nimport { CaptionText, Container, Dropdown, Header, Input, PrimaryButton, Text } from \"../styledComponents\";\nvar ImgWrapper = styled(Container).withConfig({\n  displayName: \"CompleteRegister__ImgWrapper\",\n  componentId: \"r6hcm3-0\"\n})([\"flex-direction:column;flex:0.3;padding-top:50px;padding-left:60px;padding-right:10px;background-color:\", \";min-height:100%;max-height:100%;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.btnPrimary;\n});\nvar FormWrapper = styled(Container).withConfig({\n  displayName: \"CompleteRegister__FormWrapper\",\n  componentId: \"r6hcm3-1\"\n})([\"flex-direction:column;padding-top:40px;padding-left:60px;padding-right:60px;flex:0.7;min-height:100%;max-height:100%;\"]);\nvar Form = styled.form.withConfig({\n  displayName: \"CompleteRegister__Form\",\n  componentId: \"r6hcm3-2\"\n})([\"display:flex;flex-direction:column;width:50%;flex:0.72;padding-top:30px;padding-bottom:20px;\"]);\n\nvar Countries = function Countries(_ref2) {\n  var country = _ref2.country,\n      setCountry = _ref2.setCountry;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var _useState = useState([]),\n      countryList = _useState[0],\n      setCountryList = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  function getCountries(event, client) {\n    var res, countries;\n    return _regeneratorRuntime.async(function getCountries$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            setAnchorEl(event.currentTarget);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(client.query({\n              query: GET_COUNTRIES\n            }));\n\n          case 4:\n            res = _context.sent;\n            countries = res.data.countries;\n            setCountryList(changeObj(countries));\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var changeObj = function changeObj(arr) {\n    var newArr = [];\n    arr.forEach(function (item, i) {\n      var newItem = {\n        id: item.id,\n        value: item.name\n      };\n      newArr.push(newItem);\n    });\n    return newArr;\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(Container, {\n      column: true,\n      color: \"transparent\",\n      customStyles: {\n        marginRight: 10\n      }\n    }, __jsx(Dropdown, {\n      title: country.length > 0 ? country[0].value : \"Country\",\n      anchorEl: anchorEl,\n      handleOpen: function handleOpen(e) {\n        return getCountries(e, client);\n      },\n      handleClose: handleClose,\n      selection: country,\n      setSelection: setCountry,\n      items: countryList,\n      wrapperStyles: {\n        width: 150,\n        marginBottom: 10,\n        backgroundColor: \"#fff\"\n      }\n    }));\n  });\n};\n\nvar Provinces = function Provinces(_ref3) {\n  var country = _ref3.country,\n      province = _ref3.province,\n      setProvince = _ref3.setProvince;\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      anchorEl = _React$useState4[0],\n      setAnchorEl = _React$useState4[1];\n\n  var _useState3 = useState([]),\n      provinceList = _useState3[0],\n      setProvinceList = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  function getProvinces(event, client) {\n    var res, provinces;\n    return _regeneratorRuntime.async(function getProvinces$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            setAnchorEl(event.currentTarget);\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(client.query({\n              query: GET_PROVINCES_IN_COUNTRY,\n              variables: {\n                id: country[0].id\n              }\n            }));\n\n          case 4:\n            res = _context2.sent;\n            provinces = res.data.getProvincesByCountry;\n            setProvinceList(changeObj(provinces));\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var changeObj = function changeObj(arr) {\n    var newArr = [];\n    arr.forEach(function (item, i) {\n      var newItem = {\n        id: item.id,\n        value: item.name\n      };\n      newArr.push(newItem);\n    });\n    return newArr;\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(Container, {\n      column: true,\n      color: \"transparent\",\n      customStyles: {\n        pointerEvents: country.length === 0 ? \"none\" : \"auto\",\n        marginRight: 10\n      }\n    }, __jsx(Dropdown, {\n      title: province.length > 0 ? province[0].value : \"Province\",\n      anchorEl: anchorEl,\n      handleOpen: function handleOpen(e) {\n        return getProvinces(e, client);\n      },\n      handleClose: handleClose,\n      selection: province,\n      setSelection: setProvince,\n      items: provinceList,\n      wrapperStyles: {\n        width: 150\n      }\n    }));\n  });\n};\n\nvar Districts = function Districts(_ref4) {\n  var province = _ref4.province,\n      district = _ref4.district,\n      setDistrict = _ref4.setDistrict;\n\n  var _React$useState5 = React.useState(null),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      anchorEl = _React$useState6[0],\n      setAnchorEl = _React$useState6[1];\n\n  var _useState5 = useState([]),\n      districtList = _useState5[0],\n      setDistrictList = _useState5[1];\n\n  var _useState6 = useState(false),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  function getDistricts(event, client) {\n    var res, districts;\n    return _regeneratorRuntime.async(function getDistricts$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setLoading(true);\n            setAnchorEl(event.currentTarget);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(client.query({\n              query: GET_DISTRICTS_IN_PROVINCE,\n              variables: {\n                id: province[0].id\n              }\n            }));\n\n          case 4:\n            res = _context3.sent;\n            districts = res.data.getDistrictsByProvince;\n            setDistrictList(changeObj(districts));\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var changeObj = function changeObj(arr) {\n    var newArr = [];\n    arr.forEach(function (item, i) {\n      var newItem = {\n        id: item.id,\n        value: item.name\n      };\n      newArr.push(newItem);\n    });\n    return newArr;\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(Container, {\n      column: true,\n      color: \"transparent\",\n      customStyles: {\n        pointerEvents: province.length === 0 ? \"none\" : \"auto\"\n      }\n    }, __jsx(Dropdown, {\n      title: district.length > 0 ? district[0].value : \"District\",\n      anchorEl: anchorEl,\n      handleOpen: function handleOpen(e) {\n        return getDistricts(e, client);\n      },\n      handleClose: handleClose,\n      selection: district,\n      setSelection: setDistrict,\n      items: districtList,\n      wrapperStyles: {\n        width: 150\n      }\n    }));\n  });\n};\n\nvar CREATE_LANDLORD_MUTATION = gql(_templateObject());\n\nvar CompleteRegister = function CompleteRegister() {\n  var _useState7 = useState([]),\n      country = _useState7[0],\n      setCountry = _useState7[1];\n\n  var _useState8 = useState([]),\n      district = _useState8[0],\n      setDistrict = _useState8[1];\n\n  var _useState9 = useState([]),\n      province = _useState9[0],\n      setProvince = _useState9[1];\n\n  var _useState10 = useState(null),\n      firstName = _useState10[0],\n      setFirstName = _useState10[1];\n\n  var _useState11 = useState(null),\n      lastName = _useState11[0],\n      setLastName = _useState11[1];\n\n  var _useState12 = useState(null),\n      tel_no = _useState12[0],\n      setTelNo = _useState12[1];\n\n  var _useState13 = useState(null),\n      reason = _useState13[0],\n      setReason = _useState13[1];\n\n  var _useState14 = useState(null),\n      street = _useState14[0],\n      setStreet = _useState14[1];\n\n  var onCompletion = function onCompletion() {\n    Router.replace(\"/Landlord/dashboard\");\n    setFirstName(null);\n    setLastName(null);\n    setTelNo(null);\n    setReason(null);\n    setStreet(null);\n  };\n\n  var _useMutation = useMutation(CREATE_LANDLORD_MUTATION, {\n    variables: {\n      firstName: firstName,\n      lastName: lastName,\n      tel_no: tel_no,\n      reason: reason,\n      street: street\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createLandlord = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      data = _useMutation2$.data,\n      loading = _useMutation2$.loading;\n\n  console.log(data);\n  return __jsx(Container, {\n    flex: 1,\n    row: true,\n    customStyles: {\n      minHeight: \"100vh\",\n      maxHeight: \"100vh\"\n    }\n  }, __jsx(FormWrapper, null, __jsx(Container, {\n    flex: false,\n    row: true,\n    center: true,\n    color: \"transparent\"\n  }, __jsx(\"img\", {\n    src: hasLogo,\n    style: {\n      width: \"50px\",\n      height: \"50px\",\n      marginRight: \"10px\"\n    }\n  }), __jsx(Text, null, \"House-Assist Space\")), __jsx(Container, {\n    flex: 1,\n    column: true,\n    center: true\n  }, __jsx(Form, {\n    method: \"post\",\n    onSubmit: function onSubmit(e) {\n      e.preventDefault();\n      createLandlord();\n      Router.replace(\"/Landlrd/dashboard\");\n      setFirstName(null);\n      setLastName(null);\n      setTelNo(null);\n      setReason(null);\n      setStreet(null);\n    }\n  }, __jsx(Header, {\n    customStyles: {\n      fontWeight: \"400\",\n      marginBottom: 5\n    }\n  }, \"Provide more information\"), __jsx(\"fieldset\", {\n    disabled: loading,\n    style: {\n      display: \"flex\",\n      paddingTop: \"30px\",\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingBottom: 0,\n      border: \"none\",\n      flexDirection: \"column\",\n      marginBottom: 10\n    }\n  }, __jsx(CaptionText, {\n    customStyles: {\n      marginBottom: 10\n    }\n  }, \"Tell us a little more about yourself\"), __jsx(Input, {\n    label: \"FIRST NAME\",\n    placeholder: \"First Name\",\n    type: \"text\",\n    value: firstName,\n    onChange: function onChange(e) {\n      return setFirstName(e.target.value);\n    }\n  }), __jsx(Input, {\n    label: \"LAST NAME\",\n    placeholder: \"Last Name\",\n    type: \"text\",\n    value: lastName,\n    onChange: function onChange(e) {\n      return setLastName(e.target.value);\n    }\n  }), __jsx(Input, {\n    label: \"PHONE NUMBER\",\n    placeholder: \"Phone Number\",\n    type: \"tel\",\n    value: tel_no,\n    onChange: function onChange(e) {\n      return setTelNo(e.target.value);\n    }\n  }), __jsx(Input, {\n    label: \"LOCATION\",\n    placeholder: \"Country/ city / street\",\n    type: \"tel\",\n    value: street,\n    onChange: function onChange(e) {\n      return setStreet(e.target.value);\n    }\n  }), __jsx(CaptionText, {\n    customStyles: {\n      marginBottom: 10,\n      fontSize: 11,\n      color: \"#323130\"\n    }\n  }, \"WHY ARE YOU JOINING HOUSE-ASSIST SPACE\"), __jsx(Input, {\n    placeholder: \"provide reason\",\n    type: \"text\",\n    value: reason,\n    onChange: function onChange(e) {\n      return setReason(e.target.value);\n    }\n  })), __jsx(Container, {\n    row: true,\n    center: true,\n    space: \"space-between\"\n  }, __jsx(Link, {\n    href: \"/Landlrd/dashboard\",\n    as: \"/Landlrd/dashboard\"\n  }, __jsx(\"a\", null, __jsx(PrimaryButton, {\n    type: \"button\",\n    customStyles: {\n      paddingTop: 8,\n      paddingBottom: 8,\n      marginTop: 10,\n      width: 100\n    }\n  }, \"Skip\"))), loading ? __jsx(PrimaryButton, {\n    type: \"submit\",\n    customStyles: {\n      paddingTop: 8,\n      paddingBottom: 8,\n      marginTop: 10,\n      width: 100\n    }\n  }, \"Saving\") : __jsx(PrimaryButton, {\n    disabled: firstName === null,\n    type: \"submit\",\n    customStyles: {\n      paddingTop: 8,\n      paddingBottom: 8,\n      marginTop: 10,\n      width: 100\n    }\n  }, \"Save\"))))), __jsx(ImgWrapper, null));\n};\n\nexport default CompleteRegister;","map":null,"metadata":{},"sourceType":"module"}