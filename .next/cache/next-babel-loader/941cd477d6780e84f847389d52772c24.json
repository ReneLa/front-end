{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation LOGIN_MUTATION($email: String!, $password: String!) {\\n    login(email: $email, password: $password) {\\n      id\\n      user_name\\n      email\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../queryComponents/landlord/CurrentUser\";\nimport { Container, Text, SubHeader, Input, PrimaryButton, SubText, ActionButton, CaptionText } from \"../styledComponents\";\nimport styled from \"styled-components\";\nimport { device } from \"../../lib/deviceSize\";\nimport hasLogo from \"../../public/static/HAS.png\";\nvar ImgWrapper = styled(Container).withConfig({\n  displayName: \"Login__ImgWrapper\",\n  componentId: \"sc-1y90nvw-0\"\n})([\"flex-direction:column;flex:0.65;padding-top:50px;padding-left:60px;padding-right:10px;background-color:\", \";min-height:100%;max-height:100%;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.btnPrimary;\n});\nvar FormWrapper = styled(Container).withConfig({\n  displayName: \"Login__FormWrapper\",\n  componentId: \"sc-1y90nvw-1\"\n})([\"flex-direction:column;flex:0.35;min-height:100%;max-height:100%;\"]);\nvar Form = styled.form.withConfig({\n  displayName: \"Login__Form\",\n  componentId: \"sc-1y90nvw-2\"\n})([\"display:flex;flex-direction:column;width:100%;padding-top:60px;padding-left:50px;padding-right:50px;justify-content:center;flex:1;\"]); // login mutation api\n\nvar LOGIN_MUTATION = gql(_templateObject());\n\nvar Login = function Login() {\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  return __jsx(Container, {\n    flex: 1,\n    color: \"red\",\n    row: true,\n    customStyles: {\n      minHeight: \"100vh\",\n      maxHeight: \"100vh\"\n    }\n  }, __jsx(ImgWrapper, null, __jsx(Container, {\n    flex: false,\n    row: true,\n    center: true,\n    color: \"transparent\"\n  }, __jsx(\"img\", {\n    src: hasLogo,\n    style: {\n      width: \"50px\",\n      height: \"50px\",\n      marginRight: \"10px\"\n    }\n  }), __jsx(Text, {\n    customStyles: {\n      color: \"white\"\n    }\n  }, \"House-Assist Space\"))), __jsx(Mutation, {\n    mutation: LOGIN_MUTATION,\n    variables: {\n      email: email,\n      password: password\n    },\n    refetchQueries: [{\n      query: CURRENT_USER_QUERY\n    }]\n  }, function (login, _ref2) {\n    var error = _ref2.error,\n        loading = _ref2.loading;\n    return __jsx(FormWrapper, null, __jsx(Form, {\n      method: \"post\",\n      onSubmit: function _callee(e) {\n        var res;\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _context.next = 3;\n                return _regeneratorRuntime.awrap(login());\n\n              case 3:\n                res = _context.sent;\n\n                if (res) {\n                  console.log(res);\n                  Router.replace(\"/Landlrd/dashboard\");\n                }\n\n                setEmail(\"\");\n                setPassword(\"\");\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    }, __jsx(SubHeader, {\n      customStyles: {\n        fontWeight: \"500\",\n        marginBottom: 10\n      }\n    }, \"Login\"), __jsx(Text, null, \"Welcome back, log in to see the latest data!\"), __jsx(\"fieldset\", {\n      disabled: loading,\n      style: {\n        display: \"flex\",\n        paddingTop: \"30px\",\n        paddingLeft: 0,\n        paddingRight: 0,\n        paddingBottom: 0,\n        border: \"none\",\n        flexDirection: \"column\"\n      }\n    }, __jsx(Input, {\n      label: \"EMAIL\",\n      placeholder: \"eg: name@example.com\",\n      value: email,\n      onChange: function onChange(e) {\n        return setEmail(e.target.value);\n      }\n    }), __jsx(Input, {\n      type: \"password\",\n      label: \"PASSWORD\",\n      value: password,\n      onChange: function onChange(e) {\n        return setPassword(e.target.value);\n      }\n    })), __jsx(Container, {\n      row: true,\n      left: true,\n      center: true,\n      customStyles: {\n        marginBottom: 15\n      }\n    }), loading ? __jsx(PrimaryButton, {\n      type: \"submit\"\n    }, \"Logging...\") : __jsx(PrimaryButton, {\n      type: \"submit\"\n    }, \"Login\"), __jsx(Container, {\n      row: true,\n      middle: true,\n      center: true,\n      customStyles: {\n        marginTop: 30\n      }\n    }, __jsx(Link, {\n      href: \"/Landlrd/register\",\n      as: \"/Landlrd/register\"\n    }, __jsx(\"a\", null, __jsx(SubText, {\n      customStyles: {\n        fontWeight: \"italic\",\n        color: \"#0078D4\"\n      }\n    }, \"New to House-Assist Space? Register\"))))));\n  }));\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}