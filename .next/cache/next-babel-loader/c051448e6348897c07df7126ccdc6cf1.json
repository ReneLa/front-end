{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_LEASE_INFO_MUTATION(\\n    $lease_name: String!\\n    $admin_fee: Int!\\n    $brokerage_fee: Int\\n    $security_deposit: Int\\n    $houseId: ID!\\n  ) {\\n    createLeaseInfo(\\n      lease_name: $lease_name\\n      admin_fee: $admin_fee\\n      brokerage_fee: $brokerage_fee\\n      security_deposit: $security_deposit\\n      houseId: $houseId\\n    ) {\\n      id\\n      lease_name\\n      admin_fee\\n      security_deposit\\n      brokerage_fee\\n      houseId {\\n        id\\n        house_heading\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Divider, Fade as FadeWrapper, FormControl, IconButton, InputBase, Paper, Select, Typography } from \"@material-ui/core\";\nimport { fade, withStyles } from \"@material-ui/core/styles\";\nimport LeaseIcon from \"@material-ui/icons/NoteAdd\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport gql from \"graphql-tag\";\nimport React from \"react\";\nimport { Mutation } from \"react-apollo\";\nimport Slide from \"react-reveal/Slide\";\nimport loadingImg from \"../../../../public/static/126.gif\";\nimport Houses from \"../../../queryComponents/Houses\";\nimport Leases, { GET_USER_HOUSES_LEASES } from \"../../../queryComponents/Leases\";\nimport { Container, FlatButton, Input } from \"../../../styledComponents\";\nimport DeleteParentHouse from \"../DeleteParentHouse\";\nvar CREATE_LEASE_INFO_MUTATION = gql(_templateObject());\n\nvar styles = function styles(theme) {\n  return {\n    list: {\n      width: \"100%\",\n      alignItems: \"center\"\n    },\n    formControl: {\n      marginTop: theme.spacing(2),\n      maxWidth: 120\n    },\n    button: {\n      margin: theme.spacing(1)\n    },\n    input: {\n      display: \"none\"\n    }\n  };\n};\n\nvar Lease = /*#__PURE__*/function (_React$Component) {\n  _inherits(Lease, _React$Component);\n\n  var _super = _createSuper(Lease);\n\n  function Lease() {\n    _classCallCheck(this, Lease);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Lease, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          leases = _this$props.leases,\n          create = _this$props.create,\n          showForm = _this$props.showForm;\n      return __jsx(Container, {\n        column: true\n      }, __jsx(Container, {\n        row: true,\n        space: \"space-between\",\n        customStyles: {\n          padding: 10\n        }\n      }, __jsx(Paper, {\n        component: \"form\",\n        className: classes.root,\n        elevation: 0\n      }, __jsx(InputBase, {\n        className: classes.input,\n        placeholder: \"Search leases\" // inputProps={{ \"aria-label\": \"search google maps\" }}\n\n      }), __jsx(Divider, {\n        className: classes.divider,\n        orientation: \"vertical\"\n      }), __jsx(IconButton, {\n        type: \"submit\",\n        className: classes.iconButton,\n        \"aria-label\": \"search\"\n      }, __jsx(SearchIcon, null))), __jsx(FlatButton, {\n        onClick: function onClick() {\n          create();\n        }\n      }, \"New Lease\")), __jsx(Container, {\n        column: true\n      }, __jsx(Container, {\n        column: true,\n        customStyles: {\n          width: \"100%\",\n          borderRadius: 2,\n          border: \"1px solid \".concat(fade(\"#393939\", 0.1))\n        }\n      }, __jsx(Container, {\n        row: true,\n        space: \"space-between\",\n        customStyles: {\n          padding: 10\n        }\n      }, __jsx(\"span\", null, \"House\"), __jsx(\"span\", null, \"Admin fee\"), __jsx(\"span\", null, \"Brokerage fee\"), __jsx(\"span\", null, \"Security fee\"), __jsx(\"span\", null, \"action\")), leases.map(function (lease) {\n        return __jsx(Container, {\n          key: lease.id,\n          row: true,\n          space: \"space-between\",\n          customStyles: {\n            padding: 10,\n            cursor: \"pointer\",\n            borderTop: \"1px solid \".concat(fade(\"#393939\", 0.1)),\n            \"&:hover\": {\n              backgroundColor: \" \".concat(fade(\"#FEFEFF\", 1))\n            }\n          }\n        }, __jsx(\"span\", null, lease.lease_name), __jsx(\"span\", null, lease.admin_fee), __jsx(\"span\", null, lease.brokerage_fee), __jsx(\"span\", null, lease.security_deposit), __jsx(Container, {\n          row: true,\n          right: true,\n          center: true\n        }, __jsx(DeleteParentHouse, {\n          id: lease.id\n        })));\n      }), __jsx(Container, {\n        row: true,\n        center: true,\n        customStyles: {\n          padding: 10,\n          borderTop: \"1px solid \".concat(fade(\"#393939\", 0.1))\n        },\n        middle: true\n      }, __jsx(Typography, null, \"showing \" + leases.length + \" result(s)\")))));\n    }\n  }]);\n\n  return Lease;\n}(React.Component);\n\nvar LeaseList = withStyles({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: 200\n  },\n  input: {\n    marginLeft: 10,\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  },\n  divider: {\n    height: 28,\n    margin: 4\n  }\n})(Lease);\n\nvar LeaseInfo = /*#__PURE__*/function (_React$Component2) {\n  _inherits(LeaseInfo, _React$Component2);\n\n  var _super2 = _createSuper(LeaseInfo);\n\n  function LeaseInfo() {\n    var _this;\n\n    _classCallCheck(this, LeaseInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super2.call.apply(_super2, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      lease_name: \"\",\n      admin_fee: parseInt(0),\n      brokerage_fee: parseInt(0),\n      security_deposit: parseInt(0),\n      houseId: null,\n      showForm: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createForm\", function () {\n      _this.setState({\n        showForm: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeCreateForm\", function () {\n      _this.setState({\n        showForm: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CreateFormWrapper\", function () {\n      var _this$state = _this.state,\n          lease_name = _this$state.lease_name,\n          admin_fee = _this$state.admin_fee,\n          brokerage_fee = _this$state.brokerage_fee,\n          security_deposit = _this$state.security_deposit,\n          houseId = _this$state.houseId,\n          showForm = _this$state.showForm;\n      var classes = _this.props.classes;\n      return __jsx(FadeWrapper, {\n        \"in\": showForm\n      }, __jsx(Container, {\n        flex: 1,\n        column: true,\n        customStyles: {\n          zIndex: 1305,\n          paddingTop: 64\n        }\n      }, __jsx(Container, {\n        row: true,\n        center: true,\n        space: \"space-between\",\n        customStyles: {\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          paddingLeft: 10,\n          paddingRight: 15,\n          height: 64,\n          borderBottom: \"0.5px solid \".concat(fade(\"#393939\", 0.2))\n        }\n      }, __jsx(\"div\", null), __jsx(Typography, {\n        variant: \"button\",\n        style: {\n          fontSize: 13,\n          fontFamily: 400\n        }\n      }, \"Create Lease\"), __jsx(\"span\", {\n        onClick: _this.closeCreateForm,\n        style: {\n          fontSize: 30,\n          fontWeight: 200,\n          cursor: \"pointer\"\n        }\n      }, \"\\xD7\")), __jsx(Houses, null, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n\n        if (data) {\n          var houses = data.getUserHouses;\n          return __jsx(Container, {\n            flex: 1,\n            column: true\n          }, __jsx(Mutation, {\n            mutation: CREATE_LEASE_INFO_MUTATION,\n            refetchQueries: [{\n              query: GET_USER_HOUSES_LEASES\n            }],\n            variables: {\n              lease_name: lease_name,\n              admin_fee: parseInt(admin_fee),\n              brokerage_fee: parseInt(brokerage_fee),\n              security_deposit: parseInt(security_deposit),\n              houseId: houseId\n            }\n          }, function (createLeaseInfo, _ref2) {\n            var loading = _ref2.loading,\n                error = _ref2.error;\n            return __jsx(Container, {\n              flex: 1,\n              color: \"inherit\",\n              role: \"presentation\"\n            }, __jsx(\"form\", {\n              method: \"post\",\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                flex: 1\n              },\n              onSubmit: function _callee(e) {\n                return _regeneratorRuntime.async(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        e.preventDefault();\n                        _context.next = 3;\n                        return _regeneratorRuntime.awrap(createLeaseInfo().then(function (res) {\n                          _this.closeCreateForm();\n                        }));\n\n                      case 3:\n                        _this.setState({\n                          lease_name: \"\",\n                          admin_fee: \"\",\n                          brokerage_fee: \"\",\n                          security_deposit: \"\",\n                          houseId: null\n                        });\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }\n            }, error && error.graphQLErrors.map(function (_ref3, i) {\n              var message = _ref3.message;\n              return __jsx(\"p\", {\n                key: i,\n                style: {\n                  color: \"red\"\n                }\n              }, message);\n            }), __jsx(Container, {\n              column: true,\n              middle: true\n            }, __jsx(Container, {\n              middle: true,\n              row: true,\n              center: true,\n              customStyles: {\n                paddingTop: 15,\n                marginTop: 30\n              }\n            }, __jsx(\"span\", null, \" Select House:\"), __jsx(FormControl, {\n              size: \"small\",\n              variant: \"outlined\",\n              className: classes.formControl\n            }, __jsx(Select, {\n              \"native\": true,\n              size: \"normal\",\n              value: houseId,\n              style: {\n                marginLeft: 15\n              },\n              onChange: function onChange(e) {\n                _this.setState({\n                  houseId: e.target.value\n                });\n              },\n              inputProps: {\n                name: \"house\",\n                id: \"outlined-lease-house-id\"\n              }\n            }, __jsx(\"option\", null, \"choose house\"), houses.map(function (house) {\n              return __jsx(\"option\", {\n                key: house.id,\n                value: house.id\n              }, house.house_heading);\n            })))), __jsx(Slide, {\n              bottom: true,\n              when: houseId !== null\n            }, __jsx(Container, {\n              column: true,\n              middle: true,\n              center: true\n            }, __jsx(Input, {\n              type: \"text\",\n              name: \"lease\",\n              label: \"lease name\",\n              value: lease_name,\n              style: {\n                width: \"50%\",\n                marginTop: 40,\n                marginBottom: 20\n              },\n              onChange: function onChange(e) {\n                _this.setState({\n                  lease_name: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"admin\",\n              label: \"admin fee\",\n              value: admin_fee,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: function onChange(e) {\n                _this.setState({\n                  admin_fee: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"brokerage\",\n              label: \"brokerage fee\",\n              value: brokerage_fee,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: function onChange(e) {\n                _this.setState({\n                  brokerage_fee: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"security\",\n              label: \"security fee\",\n              value: security_deposit,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: function onChange(e) {\n                _this.setState({\n                  security_deposit: e.target.value\n                });\n              }\n            })))), __jsx(Container, {\n              right: true,\n              center: true,\n              row: true,\n              flex: 1,\n              space: \"space-between\",\n              customStyles: {\n                position: \"absolute\",\n                bottom: 0,\n                marginTop: 15,\n                padding: 10,\n                borderTop: \"0.5px solid \".concat(fade(\"#393939\", 0.2)),\n                width: \"100%\"\n              }\n            }, __jsx(FlatButton, {\n              type: \"submit\"\n            }, \"\\\"Save\\\"\"))));\n          }));\n        }\n\n        return null;\n      })));\n    });\n\n    return _this;\n  }\n\n  _createClass(LeaseInfo, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var showForm = this.state.showForm;\n      return __jsx(Container, {\n        flex: 1\n      }, !showForm && __jsx(Leases, null, function (_ref4) {\n        var data = _ref4.data,\n            loading = _ref4.loading;\n\n        if (data) {\n          var leases = data.getLeases;\n\n          if (leases.length !== 0) {\n            return __jsx(LeaseList, {\n              leases: leases,\n              create: _this2.createForm,\n              showForm: showForm\n            });\n          }\n\n          if (leases.length === 0) {\n            return __jsx(Container, {\n              flex: 1,\n              column: true,\n              middle: true,\n              center: true\n            }, __jsx(LeaseIcon, {\n              style: {\n                fontSize: 60,\n                color: \"gray\"\n              }\n            }), __jsx(Typography, {\n              variant: \"button\",\n              style: {\n                fontSize: 18,\n                color: \"black\",\n                fontWeight: 600,\n                marginTop: 15\n              }\n            }, \"Create Lease Info\"), __jsx(Typography, {\n              style: {\n                fontSize: 13,\n                fontWeight: 200,\n                marginTop: 10\n              }\n            }, \"Make sure to create house first\"), __jsx(Typography, {\n              style: {\n                fontSize: 13,\n                fontWeight: 200,\n                marginBottom: 15\n              }\n            }, \"in order to attach lease information\"), __jsx(FlatButton, {\n              onClick: _this2.createForm\n            }, \"New\"));\n          }\n        }\n\n        if (loading) {\n          return __jsx(Container, {\n            flex: 1,\n            middle: true,\n            center: true\n          }, __jsx(\"img\", {\n            src: loadingImg,\n            style: {\n              width: 25,\n              height: 25\n            }\n          }));\n        }\n\n        return null;\n      }), this.CreateFormWrapper());\n    }\n  }]);\n\n  return LeaseInfo;\n}(React.Component);\n\nexport default withStyles(styles)(LeaseInfo);","map":null,"metadata":{},"sourceType":"module"}