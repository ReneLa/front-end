{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_TICKET_MUTATION(\\n    $title: String!\\n    $description: String!\\n    $reported_way: String\\n    $owner_review: String\\n    $houseId: ID\\n  ) {\\n    createTicket(\\n      title: $title\\n      description: $description\\n      reported_way: $reported_way\\n      owner_review: $owner_review\\n      houseId: $houseId\\n    ) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { Dialog, DialogContent, DialogTitle } from \"@material-ui/core\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport gql from \"graphql-tag\";\nimport React, { useState } from \"react\";\nimport { ApolloConsumer, Mutation } from \"react-apollo\";\nimport styled from \"styled-components\";\nimport { GET_USER_HOUSES } from \"../../../queryComponents/landlord/LandlordHouses\";\nimport { GET_LANDLORD_TICKETS } from \"../../../queryComponents/landlord/LandlordTickets\";\nimport { ActionButton, CaptionText, Container, Dropdown, Input, PrimaryButton, SubHeader } from \"../../../styledComponents\";\nvar useStyles = makeStyles(function (theme) {\n  return _defineProperty({\n    dialogPaper: {\n      height: 700,\n      width: 550,\n      borderRadius: 2,\n      // position: \"relative\",\n      backgroundColor: \"#F2F3F4\"\n    },\n    dialogActionStyle: {\n      padding: 0,\n      margin: 0,\n      border: \"none\",\n      backgroundColor: \"#F2F3F4\"\n    },\n    inputStyle: {\n      border: 0,\n      borderRadius: 1,\n      paddingTop: 10,\n      paddingRight: 10,\n      paddingBottom: 10,\n      paddingLeft: 10,\n      backgroundColor: \"#F5F8FA\",\n      // lineHeight: 2,\n      minHeight: 60,\n      fontSize: 12,\n      \"&:focus\": {\n        border: \"1px solid #4C3AF7\",\n        backgroundColor: \"#FEFEFF\"\n      }\n    },\n    dialogActions: {\n      // position: \"absolute\",\n      width: \"100%\",\n      // bottom: 0,\n      padding: 0,\n      margin: 0,\n      border: \"none\" // backgroundColor: \"white\"\n\n    },\n    dialogContentStyle: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      marginRight: 10,\n      height: \"100%\",\n      backgroundColor: \"white\",\n      border: \"none\" // backgroundColor: \"#F2F3F4\",\n\n    },\n    avatarStyle: {\n      position: \"relative\",\n      width: theme.spacing(12),\n      height: theme.spacing(10),\n      borderRadius: 5,\n      backgroundColor: \"#F3F2F1\"\n    }\n  }, \"inputStyle\", {\n    border: 0,\n    borderRadius: 1,\n    paddingTop: 10,\n    paddingRight: 10,\n    paddingBottom: 10,\n    paddingLeft: 10,\n    backgroundColor: \"#F5F8FA\",\n    // lineHeight: 2,\n    minHeight: 60,\n    fontSize: 12,\n    \"&:focus\": {\n      border: \"1px solid #4C3AF7\",\n      backgroundColor: \"#FEFEFF\"\n    }\n  });\n});\nvar ActionBtn = styled(ActionButton).withConfig({\n  displayName: \"CreateTicket__ActionBtn\",\n  componentId: \"sc-1d91g92-0\"\n})([\"display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:\", \";\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.lightGrey;\n});\nvar CloseBtn = styled(ActionButton).withConfig({\n  displayName: \"CreateTicket__CloseBtn\",\n  componentId: \"sc-1d91g92-1\"\n})([\"position:absolute;top:0;right:0;z-index:1304;display:flex;justify-content:center;align-items:center;align-content:center;padding-right:6px;padding-left:6px;border-radius:2px;background-color:\", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.bgPrimary;\n});\nvar CancelBtn = styled(PrimaryButton).withConfig({\n  displayName: \"CreateTicket__CancelBtn\",\n  componentId: \"sc-1d91g92-2\"\n})([\"border:none;color:\", \";background-color:transparent;&:hover{background-color:\", \";}\"], function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.primaryDark;\n}, function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.lightGrey;\n});\nvar CREATE_TICKET_MUTATION = gql(_templateObject());\n\nvar Reported = function Reported(_ref6) {\n  var reportWay = _ref6.reportWay,\n      setReportWay = _ref6.setReportWay;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var _useState = useState([{\n    id: 1,\n    value: \"System\"\n  }, {\n    id: 2,\n    value: \"Phone\"\n  }, {\n    id: 3,\n    value: \"Email\"\n  }, {\n    id: 4,\n    value: \"In person\"\n  }]),\n      options = _useState[0],\n      setOptions = _useState[1];\n\n  var handleClickOpen = function handleClickOpen(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var valuesList = function valuesList() {\n    return __jsx(\"div\", null, reportWay.map(function (lst) {\n      return __jsx(\"span\", {\n        key: lst.id\n      }, lst.value + \", \");\n    }));\n  };\n\n  return __jsx(Dropdown, {\n    title: reportWay.length > 0 ? valuesList() : \"choose\",\n    anchorEl: anchorEl,\n    handleOpen: handleClickOpen,\n    handleClose: handleClose,\n    selection: reportWay,\n    setSelection: setReportWay,\n    items: options,\n    wrapperStyles: {\n      width: 120\n    }\n  });\n};\n\nvar Houses = function Houses(_ref7) {\n  var house = _ref7.house,\n      setHouse = _ref7.setHouse;\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      anchorEl = _React$useState4[0],\n      setAnchorEl = _React$useState4[1];\n\n  var _useState2 = useState([]),\n      housesList = _useState2[0],\n      setHousesList = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  function getTenants(event, client) {\n    var res, houses;\n    return _regeneratorRuntime.async(function getTenants$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            setAnchorEl(event.currentTarget);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(client.query({\n              query: GET_USER_HOUSES\n            }));\n\n          case 4:\n            res = _context.sent;\n            houses = res.data.getUserHouses;\n            setHousesList(changeObj(houses));\n            console.log(houses);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var changeObj = function changeObj(arr) {\n    var newArr = [];\n    arr.forEach(function (item, i) {\n      var newItem = {\n        id: item.id,\n        value: item.house_heading\n      };\n      newArr.push(newItem);\n    });\n    return newArr;\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(Container, {\n      column: true,\n      color: \"transparent\",\n      customStyles: {\n        marginRight: 10,\n        marginBottom: 10\n      }\n    }, __jsx(Dropdown, {\n      title: house.length > 0 ? house[0].value : \"Add House\",\n      anchorEl: anchorEl,\n      handleOpen: function handleOpen(e) {\n        return getTenants(e, client);\n      },\n      handleClose: handleClose,\n      selection: house,\n      setSelection: setHouse,\n      items: housesList,\n      wrapperStyles: {\n        width: 100\n      }\n    }));\n  });\n};\n\nvar CreateTenant = function CreateTenant() {\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState4 = useState(false),\n      open = _useState4[0],\n      setOpen = _useState4[1];\n\n  var _useState5 = useState([]),\n      reportWay = _useState5[0],\n      setReportWay = _useState5[1];\n\n  var _useState6 = useState(\"paper\"),\n      scroll = _useState6[0],\n      setScroll = _useState6[1];\n\n  var fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  var _useState7 = useState(null),\n      title = _useState7[0],\n      setTitle = _useState7[1];\n\n  var _useState8 = useState(null),\n      description = _useState8[0],\n      setDesc = _useState8[1];\n\n  var _useState9 = useState(null),\n      owner_review = _useState9[0],\n      setOwnerReview = _useState9[1];\n\n  var _useState10 = useState([]),\n      house = _useState10[0],\n      setHouse = _useState10[1];\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  var curr = new Date();\n  curr.setDate(curr.getDate() + 3);\n  var date = curr.toISOString().substr(0, 10);\n  return __jsx(Mutation, {\n    mutation: CREATE_TICKET_MUTATION,\n    refetchQueries: [{\n      query: GET_LANDLORD_TICKETS\n    }],\n    variables: {\n      title: title,\n      description: description,\n      reported_way: reportWay.length > 0 ? reportWay[0].value : \"\",\n      owner_review: owner_review,\n      houseId: house.length > 0 ? house[0].id : \"\"\n    }\n  }, function (createTicket, _ref8) {\n    var loading = _ref8.loading,\n        error = _ref8.error;\n    return __jsx(\"div\", null, __jsx(ActionBtn, {\n      onClick: handleClickOpen\n    }, \"Create Ticket\"), __jsx(Dialog, {\n      fullScreen: fullScreen,\n      onClose: handleClose,\n      classes: {\n        paper: classes.dialogPaper\n      },\n      \"aria-labelledby\": \"customized-dialog-title\",\n      open: open,\n      scroll: scroll\n    }, __jsx(DialogTitle, {\n      id: \"scroll-dialog-title\",\n      classes: {\n        root: classes.dialogActionStyle\n      }\n    }, __jsx(Container, {\n      row: true,\n      center: true,\n      color: \"transparent\",\n      space: \"space-between\",\n      customStyles: {\n        paddingTop: 15,\n        paddingBottom: 7,\n        paddingRight: 10,\n        paddingLeft: 20\n      }\n    }, __jsx(SubHeader, null, \" Create Ticket\"), __jsx(CancelBtn, {\n      onClick: handleClose\n    }, \"Cancel\"))), __jsx(\"form\", {\n      method: \"post\",\n      onSubmit: function _callee(e) {\n        return _regeneratorRuntime.async(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                _context2.next = 3;\n                return _regeneratorRuntime.awrap(createTicket().then(function (res) {\n                  handleClose(); // console.log(res);\n                })[\"catch\"](function (err) {\n                  alert(err);\n                }));\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      },\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        paddingLeft: 20,\n        paddingRight: 20,\n        paddingTop: 10,\n        paddingBottom: 10\n      }\n    }, __jsx(DialogContent, {\n      dividers: scroll === \"body\",\n      style: {\n        flex: 1\n      },\n      classes: {\n        root: classes.dialogContentStyle\n      }\n    }, __jsx(\"div\", {\n      style: {\n        flex: 1,\n        width: \"100%\"\n      }\n    }, __jsx(Container, {\n      row: true,\n      center: true,\n      color: \"transparent\"\n    }, __jsx(CaptionText, {\n      customStyles: {\n        color: \"#323130\",\n        fontWeight: \"600\",\n        marginBottom: 10\n      }\n    }, \"Ticket Information\")), __jsx(Container, {\n      color: \"transparent\",\n      row: true,\n      space: \"space-between\"\n    }, __jsx(Container, {\n      flex: 0.7,\n      customStyles: {\n        paddingRight: 10\n      },\n      color: \"transparent\"\n    }, __jsx(Input, {\n      placeholder: \"Ticket title..\",\n      type: \"text\",\n      value: title,\n      onChange: function onChange(e) {\n        return setTitle(e.target.value);\n      }\n    })), __jsx(Container, {\n      color: \"transparent\",\n      flex: 0.3,\n      customStyles: {\n        paddingLeft: 10\n      }\n    })), __jsx(Container, {\n      color: \"transparent\",\n      column: true,\n      flex: false,\n      customStyles: {\n        width: \"100%\"\n      }\n    }, __jsx(CaptionText, {\n      customStyles: {\n        marginBottom: 5,\n        color: \"#323130\"\n      }\n    }, \"Description\"), __jsx(\"textarea\", {\n      type: \"text\",\n      placeholder: \"start typing here...\",\n      className: classes.inputStyle,\n      value: description,\n      onChange: function onChange(e) {\n        return setDesc(e.target.value);\n      }\n    })), __jsx(Container, {\n      row: true,\n      flex: 1,\n      customStyles: {\n        marginTop: 10\n      },\n      color: \"transparent\"\n    }, __jsx(Container, {\n      column: true,\n      flex: 0.5,\n      color: \"transparent\",\n      customStyles: {\n        paddingRight: 5\n      }\n    }, __jsx(Container, {\n      row: true,\n      center: true,\n      color: \"transparent\"\n    }, __jsx(CaptionText, {\n      customStyles: {\n        color: \"#323130\",\n        fontWeight: \"600\",\n        marginBottom: 8,\n        marginTop: 15\n      }\n    }, \"Landlord Review\")), __jsx(Container, {\n      color: \"transparent\",\n      column: true,\n      flex: false,\n      customStyles: {\n        width: \"100%\"\n      }\n    }, __jsx(\"textarea\", {\n      type: \"text\",\n      placeholder: \"start typing here...\",\n      className: classes.inputStyle,\n      value: owner_review,\n      onChange: function onChange(e) {\n        return setOwnerReview(e.target.value);\n      }\n    }))), __jsx(Container, {\n      column: true,\n      flex: 0.5,\n      color: \"transparent\",\n      customStyles: {\n        paddingLeft: 5\n      }\n    }, __jsx(Container, {\n      row: true,\n      center: true,\n      color: \"transparent\"\n    }, __jsx(CaptionText, {\n      customStyles: {\n        color: \"#323130\",\n        fontWeight: \"600\",\n        marginBottom: 8,\n        marginTop: 15\n      }\n    }, \"Agent Review\")), __jsx(Container, {\n      color: \"transparent\",\n      column: true,\n      flex: false,\n      customStyles: {\n        width: \"100%\"\n      }\n    }, __jsx(\"textarea\", {\n      type: \"text\",\n      disabled: true,\n      placeholder: \"start typing here...\",\n      className: classes.inputStyle //   value={house_description}\n      //   onChange={(e) => setHouseDesc(e.target.value)}\n\n    })))), __jsx(Container, {\n      color: \"transparent\",\n      row: true,\n      flex: 0\n    }, __jsx(Container, {\n      color: \"transparent\",\n      customStyles: {\n        paddingRight: 5\n      },\n      flex: 0.3\n    }, __jsx(Container, {\n      flex: 0,\n      row: true,\n      center: true,\n      color: \"transparent\"\n    }, __jsx(CaptionText, {\n      customStyles: {\n        color: \"#323130\",\n        fontWeight: \"600\",\n        marginBottom: 8,\n        marginTop: 15\n      }\n    }, \"Add House\")), __jsx(Container, {\n      flex: 0,\n      row: true,\n      center: true // space=\"space-between\"\n      ,\n      color: \"transparent\"\n    }, __jsx(Houses, {\n      house: house,\n      setHouse: setHouse\n    }))), __jsx(Container, {\n      color: \"transparent\",\n      customStyles: {\n        paddingRight: 5\n      },\n      flex: 0.3\n    }, __jsx(Container, {\n      flex: 0,\n      row: true,\n      center: true,\n      color: \"transparent\"\n    }, __jsx(CaptionText, {\n      customStyles: {\n        color: \"#323130\",\n        fontWeight: \"600\",\n        marginBottom: 8,\n        marginTop: 15\n      }\n    }, \"Reported way\")), __jsx(Container, {\n      flex: 0,\n      row: true,\n      center: true // space=\"space-between\"\n      ,\n      color: \"transparent\"\n    }, __jsx(Reported, {\n      reportWay: reportWay,\n      setReportWay: setReportWay\n    })))), __jsx(Container, {\n      color: \"transparent\",\n      right: true,\n      center: true,\n      row: true,\n      flex: false,\n      customStyles: {\n        paddingTop: 30,\n        paddingBottom: 5\n      }\n    }, __jsx(PrimaryButton, {\n      type: \"submit\",\n      customStyles: {\n        pointerEvents: house.length <= 0 ? \"none\" : \"auto\",\n        opacity: house.length <= 0 ? 0.5 : 1\n      }\n    }, loading ? \"saving\" : \"Save Ticket\")))))));\n  });\n};\n\nexport default CreateTenant;","map":null,"metadata":{},"sourceType":"module"}