{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation LOGIN_MUTATION($email: String!, $password: String!) {\\n    login(email: $email, password: $password) {\\n      id\\n      user_name\\n      email\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Router from \"next/router\";\nimport hasLogo from \"../../public/static/HAS.png\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../queryComponents/User\";\nimport { Divider } from \"@material-ui/core\";\nimport { Container, Input, PrimaryButton, ActionButton, SubHeader } from \"../styledComponents\";\nimport loadingImg from \"../../public/static/126.gif\";\nvar LOGIN_MUTATION = gql(_templateObject());\nvar styles = {\n  divider: {\n    height: 3,\n    width: \"20%\",\n    margin: 4,\n    backgroundColor: \"#0078D4\"\n  }\n};\n\nvar Sign_in = /*#__PURE__*/function (_React$Component) {\n  _inherits(Sign_in, _React$Component);\n\n  var _super = _createSuper(Sign_in);\n\n  function Sign_in() {\n    var _this;\n\n    _classCallCheck(this, Sign_in);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      email: \"\",\n      password: \"\"\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    return _this;\n  }\n\n  _createClass(Sign_in, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          email = _this$state.email,\n          password = _this$state.password;\n      return __jsx(Container, {\n        flex: 1,\n        column: true,\n        color: \"#EAECEE\",\n        customStyles: {\n          height: \"100%\"\n        }\n      }, __jsx(Container, {\n        middle: true,\n        center: true,\n        flex: 1,\n        color: \"#EAECEE\",\n        column: true,\n        customStyles: {\n          minHeight: \"100vh\",\n          paddingTop: 60\n        }\n      }, __jsx(Container, {\n        depth: 16,\n        flex: 0.6,\n        column: true,\n        customStyles: {\n          width: \"35%\",\n          borderRadius: 5,\n          paddingLeft: 40,\n          paddingRight: 40\n        }\n      }, __jsx(Container, {\n        middle: true,\n        center: true\n      }, __jsx(\"img\", {\n        src: hasLogo,\n        style: {\n          width: \"25%\",\n          height: \"25%\"\n        }\n      })), __jsx(Container, {\n        column: true,\n        middle: true,\n        center: true,\n        flex: 0.2\n      }, __jsx(SubHeader, null, \"Agent login\"), __jsx(Divider, {\n        className: this.props.classes.divider,\n        orientation: \"horizontal\"\n      })), __jsx(Mutation, {\n        mutation: LOGIN_MUTATION,\n        variables: this.state,\n        refetchQueries: [{\n          query: CURRENT_USER_QUERY\n        }]\n      }, function (login, _ref) {\n        var error = _ref.error,\n            loading = _ref.loading;\n        return __jsx(\"form\", {\n          style: {\n            position: \"relative\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            flex: 0.8\n          },\n          method: \"post\",\n          onSubmit: function _callee(e) {\n            var res;\n            return _regeneratorRuntime.async(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    e.preventDefault();\n                    _context.next = 3;\n                    return _regeneratorRuntime.awrap(login());\n\n                  case 3:\n                    res = _context.sent;\n\n                    if (res) {\n                      Router.replace(\"/landlord/dashboard\");\n                    }\n\n                    _this2.setState({\n                      email: \"\",\n                      password: \"\"\n                    });\n\n                  case 6:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          }\n        }, __jsx(\"fieldset\", {\n          disabled: loading,\n          \"aria-busy\": loading,\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            border: \"none\",\n            width: \"100%\"\n          }\n        }, error && error.graphQLErrors.map(function (_ref2, i) {\n          var message = _ref2.message;\n          return __jsx(\"p\", {\n            key: i,\n            style: {\n              color: \"red\"\n            }\n          }, message);\n        }), __jsx(Container, {\n          flex: 1,\n          middle: true,\n          center: true\n        }, __jsx(Input, {\n          id: \"email\",\n          label: \"E-mail\",\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"enter email\",\n          style: {\n            marginBottom: 10,\n            width: 300\n          },\n          value: email,\n          onChange: _this2.handleChange\n        })), __jsx(Container, {\n          middle: true,\n          center: true\n        }, __jsx(Input, {\n          id: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"enter password\",\n          style: {\n            marginBottom: 10,\n            width: 300\n          },\n          value: password,\n          onChange: _this2.handleChange\n        }))), __jsx(Container, {\n          space: \"space-between\",\n          row: true,\n          center: true,\n          customStyles: {\n            width: \"100%\",\n            // position: \"absolute\",\n            backgroundColor: \"transparent\",\n            // bottom: 0,\n            paddingLeft: 35,\n            paddingRight: 35\n          }\n        }, __jsx(Link, {\n          href: \"/landlord/signup\"\n        }, __jsx(\"a\", null, __jsx(ActionButton, null, \"Create account\"))), __jsx(Container, null, __jsx(PrimaryButton, {\n          type: \"submit\"\n        }, loading ? __jsx(\"img\", {\n          src: loadingImg,\n          style: {\n            width: 20,\n            height: 20\n          },\n          alt: \"loading...\"\n        }) : \"Login\"))));\n      }))));\n    }\n  }]);\n\n  return Sign_in;\n}(React.Component);\n\nexport default withStyles(styles)(Sign_in);","map":null,"metadata":{},"sourceType":"module"}