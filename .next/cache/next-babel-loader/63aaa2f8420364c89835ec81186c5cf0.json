{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Container, ActionButton, IconButton, Text, Input, TextInput, SubText, CaptionText, PrimaryButton, Header, SubHeader } from \"../../styledComponents\";\nimport gql from \"graphql-tag\";\nimport { ApolloConsumer, Mutation } from \"react-apollo\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport userPhoto from \"../../../public/static/sandy.jpeg\";\nimport CheckIcon from \"@material-ui/icons/Done\";\nimport HouseIcon from \"@material-ui/icons/Home\";\nimport { withStyles, makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { Button, Typography, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Avatar, Divider } from \"@material-ui/core\";\nimport { GET_LANDLORD_TENANTS } from \"../../queryComponents/landlord/LandlordTenants\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AddIcon from \"@material-ui/icons/AddCircleOutline\";\nimport Add from \"@material-ui/icons/Add\";\nimport loadingImg from \"../../../public/static/126.gif\";\nconst useStyles = makeStyles(theme => ({\n  dialogPaper: {\n    height: 700,\n    width: 500,\n    borderRadius: 2,\n    backgroundColor: \"white\",\n    position: \"relative\"\n  },\n  dialogActionStyle: {\n    padding: 0,\n    margin: 0,\n    border: \"none\",\n    backgroundColor: \"white\"\n  },\n  dialogActions: {\n    position: \"absolute\",\n    width: \"100%\",\n    bottom: 0,\n    padding: 10,\n    margin: 0,\n    border: \"none\" // backgroundColor: \"red\",\n\n  },\n  dialogContentStyle: {\n    display: \"flex\",\n    padding: 0,\n    border: \"none\",\n    backgroundColor: \"white\"\n  },\n  avatarStyle: {\n    width: theme.spacing(5),\n    height: theme.spacing(5),\n    borderRadius: 1,\n    backgroundColor: \"#F3F2F1\"\n  },\n  buildingImageStyle: {\n    width: theme.spacing(5),\n    height: theme.spacing(5),\n    borderRadius: 2,\n    marginRight: 20,\n    border: \"1.5px dashed #F3F2F1\",\n    backgroundColor: \"#F3F2F1\"\n  },\n  inputStyle: {\n    border: 0,\n    borderRadius: 4,\n    paddingTop: 10,\n    paddingRight: 10,\n    paddingBottom: 10,\n    paddingLeft: 10,\n    backgroundColor: \"#F5F8FA\",\n    // lineHeight: 2,\n    minHeight: 60,\n    fontSize: 12,\n    \"&:focus\": {\n      border: \"1px solid #4C3AF7\",\n      backgroundColor: \"#FEFEFF\"\n    }\n  }\n}));\nconst ActionBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__ActionBtn\",\n  componentId: \"sc-3wd5u5-0\"\n})([\"display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:\", \";\"], ({\n  theme\n}) => theme.lightGrey);\nconst CloseBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__CloseBtn\",\n  componentId: \"sc-3wd5u5-1\"\n})([\"z-index:1304;display:flex;justify-content:center;align-items:center;align-content:center;padding-right:6px;padding-left:6px;border-radius:2px;background-color:\", \";\"], ({\n  theme\n}) => theme.bgPrimary);\nconst AddBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__AddBtn\",\n  componentId: \"sc-3wd5u5-2\"\n})([\"display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:\", \";\"], ({\n  theme\n}) => theme.lightGrey);\nconst CancelBtn = styled(PrimaryButton).withConfig({\n  displayName: \"AddHouseTenant__CancelBtn\",\n  componentId: \"sc-3wd5u5-3\"\n})([\"border:none;color:\", \";background-color:transparent;&:hover{background-color:\", \";}\"], ({\n  theme\n}) => theme.primaryDark, ({\n  theme\n}) => theme.lightGrey);\nconst Tag = styled.div.withConfig({\n  displayName: \"AddHouseTenant__Tag\",\n  componentId: \"sc-3wd5u5-4\"\n})([\"display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:20px;background-color:#e1e1e1;padding:4px 15px;margin:0px 2px;\"]);\nconst Form = styled.form.withConfig({\n  displayName: \"AddHouseTenant__Form\",\n  componentId: \"sc-3wd5u5-5\"\n})([\"display:flex;flex-direction:row;padding:0px 40px;\"]);\nconst ADD_HOUSE_TENANT_MUTATION = gql`\n  mutation ADD_HOUSE_TENANT_MUTATION($houseId: ID!, $tenantId: ID!) {\n    addHouseTenant(houseId: $houseId, tenantId: $tenantId) {\n      id\n      firstName\n      lastName\n    }\n  }\n`;\n\nconst TenantsContainer = ({\n  addTo,\n  tenants,\n  tenantList,\n  loading\n}) => {\n  const classes = useStyles();\n\n  const handleClick = tenant => {\n    if (!tenants.some(current => current.id === tenant.id)) {\n      addTo([tenant]);\n    } else {\n      let tenantAfterRemoval = tenants;\n      tenantAfterRemoval = tenantAfterRemoval.filter(current => current.id !== tenant.id);\n      addTo([...tenantAfterRemoval]);\n    }\n  };\n\n  const isTenantSelected = tenant => {\n    if (tenants.some(current => current.id === tenant.id)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return __jsx(Container, {\n    column: true,\n    customStyles: {\n      padding: \"10px 40px\"\n    },\n    color: \"transparent\"\n  }, loading && __jsx(Container, {\n    flex: 1,\n    middle: true,\n    center: true,\n    column: true,\n    color: \"transparent\"\n  }, __jsx(\"img\", {\n    src: loadingImg,\n    style: {\n      width: 20,\n      height: 20\n    }\n  })), !loading && tenantList && tenantList.map(ten => {\n    return __jsx(Container, {\n      flex: false,\n      key: ten.id,\n      column: true,\n      color: \"transparent\"\n    }, __jsx(Container, {\n      color: \"transparent\",\n      row: true,\n      center: true,\n      flex: 1,\n      customStyles: {\n        paddingTop: 15,\n        paddingBottom: 5,\n        paddingLeft: 0,\n        paddingRight: 5\n      }\n    }, __jsx(Container, {\n      row: true,\n      flex: 1,\n      center: true,\n      color: \"transparent\"\n    }, ten.profileImage === null ? __jsx(Avatar, {\n      src: ten.profileImage,\n      className: classes.avatarStyle\n    }, __jsx(SubHeader, null, ten.firstName.charAt(0) + ten.lastName.charAt(0))) : __jsx(Avatar, {\n      src: ten.profileImage,\n      className: classes.avatarStyle\n    }), __jsx(Container, {\n      column: true,\n      flex: 1,\n      color: \"transparent\"\n    }, __jsx(SubHeader, {\n      customStyles: {\n        fontSize: 14,\n        fontWeight: \"600\",\n        marginBottom: 0,\n        marginLeft: 15\n      }\n    }, ten.firstName + \"\" + ten.lastName))), __jsx(AddBtn, {\n      onClick: () => handleClick(ten)\n    }, isTenantSelected(ten) ? __jsx(CheckIcon, {\n      style: {\n        fontSize: 18,\n        color: \"green\"\n      }\n    }) : __jsx(Add, {\n      style: {\n        fontSize: 18\n      }\n    }))));\n  }));\n};\n\nconst AddHouseTenant = ({\n  house\n}) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const {\n    0: building_name,\n    1: setBuildingName\n  } = useState(null);\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: scroll,\n    1: setScroll\n  } = useState(\"paper\");\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n  const {\n    0: isloading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: addToTenant,\n    1: setAddToTenant\n  } = useState([]);\n  const {\n    0: tenantList,\n    1: setTenantList\n  } = useState(null);\n  const [addToHouse, {\n    data,\n    loading\n  }] = useMutation(ADD_HOUSE_TENANT_MUTATION, {\n    variables: {\n      houseId: house.id,\n      tenantId: addToTenant.length > 0 ? addToTenant[0].id : \"\"\n    }\n  });\n  console.log(data);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  async function getTenants(client) {\n    setLoading(true);\n    const res = await client.query({\n      query: GET_LANDLORD_TENANTS\n    });\n    const tenants = res.data.getLandlordTenants;\n    setTenantList(tenants);\n    setLoading(false);\n  }\n\n  return __jsx(ApolloConsumer, null, client => __jsx(\"div\", null, __jsx(IconButton, {\n    onClick: e => {\n      handleClickOpen();\n      getTenants(client);\n    },\n    customStyles: {\n      backgroundColor: \"#0078D4\",\n      height: 33 //   width: 33,\n\n    }\n  }, __jsx(SubText, {\n    customStyles: {\n      color: \"white\"\n    }\n  }, \"Add\")), __jsx(Dialog, {\n    fullScreen: fullScreen,\n    onClose: e => {\n      handleClose();\n    },\n    classes: {\n      paper: classes.dialogPaper\n    },\n    \"aria-labelledby\": \"customized-dialog-title\",\n    open: open,\n    scroll: scroll\n  }, __jsx(DialogTitle, {\n    id: \"scroll-dialog-title\",\n    classes: {\n      root: classes.dialogActionStyle\n    }\n  }, __jsx(Container, {\n    row: true,\n    center: true,\n    right: true,\n    color: \"transparent\",\n    space: \"space-between\",\n    customStyles: {\n      paddingTop: 15,\n      paddingBottom: 7,\n      paddingRight: 10,\n      paddingLeft: 20\n    }\n  }, __jsx(Container, {\n    color: \"transparent\",\n    column: true,\n    row: true,\n    center: true,\n    left: true,\n    flex: 1\n  }, __jsx(SubHeader, null, \"Tenants\")), __jsx(CloseBtn, {\n    onClick: handleClose\n  }, __jsx(CloseIcon, {\n    style: {\n      fontSize: 23\n    }\n  })))), __jsx(DialogContent, {\n    classes: {\n      root: classes.dialogContentStyle\n    }\n  }, __jsx(Container, {\n    flex: 1,\n    column: true,\n    color: \"transparent\",\n    customStyles: {\n      paddingTop: 10,\n      paddingBottom: 10\n    }\n  }, __jsx(TenantsContainer, {\n    loading: isloading,\n    addTo: setAddToTenant,\n    tenants: addToTenant,\n    tenantList: tenantList\n  }))), __jsx(DialogActions, {\n    className: classes.dialogActions\n  }, __jsx(PrimaryButton, {\n    customStyles: {\n      pointerEvents: addToTenant.length <= 0 ? \"none\" : \"auto\",\n      opacity: addToTenant.length <= 0 ? 0.4 : 1.0\n    },\n    onClick: () => {\n      addToHouse();\n    }\n  }, \"ADD\")))));\n};\n\nexport default AddHouseTenant;","map":null,"metadata":{},"sourceType":"module"}