{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport { withStyles, fade } from \"@material-ui/core/styles\";\nimport Slide from \"react-reveal/Slide\";\nimport { Mutation } from \"react-apollo\";\nimport { Select, Button, Avatar, Typography, Fade as FadeWrapper, FormControl, Paper, InputBase, Divider, IconButton } from \"@material-ui/core\";\nimport gql from \"graphql-tag\";\nimport LeaseIcon from \"@material-ui/icons/NoteAdd\";\nimport loadingImg from \"../../../../public/static/126.gif\";\nimport { Container, FlatButton, Input } from \"../../../styledComponents\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport Leases from \"../../../queryComponents/Leases\";\nimport DeleteParentHouse from \"../DeleteParentHouse\";\nimport Houses from \"../../../queryComponents/Houses\";\nimport { GET_USER_HOUSES_LEASES } from \"../../../queryComponents/Leases\";\nconst CREATE_LEASE_INFO_MUTATION = gql`\n  mutation CREATE_LEASE_INFO_MUTATION(\n    $lease_name: String!\n    $admin_fee: Int!\n    $brokerage_fee: Int\n    $security_deposit: Int\n    $houseId: ID!\n  ) {\n    createLeaseInfo(\n      lease_name: $lease_name\n      admin_fee: $admin_fee\n      brokerage_fee: $brokerage_fee\n      security_deposit: $security_deposit\n      houseId: $houseId\n    ) {\n      id\n      lease_name\n      admin_fee\n      security_deposit\n      brokerage_fee\n      houseId {\n        id\n        house_heading\n      }\n    }\n  }\n`;\n\nconst styles = theme => ({\n  list: {\n    width: \"100%\",\n    alignItems: \"center\"\n  },\n  formControl: {\n    marginTop: theme.spacing(2),\n    maxWidth: 120\n  },\n  button: {\n    margin: theme.spacing(1)\n  },\n  input: {\n    display: \"none\"\n  }\n});\n\nclass Lease extends React.Component {\n  render() {\n    const {\n      classes,\n      leases,\n      create,\n      showForm\n    } = this.props;\n    return __jsx(Container, {\n      column: true\n    }, __jsx(Container, {\n      row: true,\n      space: \"space-between\",\n      customStyles: {\n        padding: 10\n      }\n    }, __jsx(Paper, {\n      component: \"form\",\n      className: classes.root,\n      elevation: 0\n    }, __jsx(InputBase, {\n      className: classes.input,\n      placeholder: \"Search leases\" // inputProps={{ \"aria-label\": \"search google maps\" }}\n\n    }), __jsx(Divider, {\n      className: classes.divider,\n      orientation: \"vertical\"\n    }), __jsx(IconButton, {\n      type: \"submit\",\n      className: classes.iconButton,\n      \"aria-label\": \"search\"\n    }, __jsx(SearchIcon, null))), __jsx(FlatButton, {\n      onClick: () => {\n        create();\n      }\n    }, \"New Lease\")), __jsx(Container, {\n      column: true\n    }, __jsx(Container, {\n      column: true,\n      customStyles: {\n        width: \"100%\",\n        borderRadius: 2,\n        border: `1px solid ${fade(\"#393939\", 0.1)}`\n      }\n    }, __jsx(Container, {\n      row: true,\n      space: \"space-between\",\n      customStyles: {\n        padding: 10\n      }\n    }, __jsx(\"span\", null, \"House\"), __jsx(\"span\", null, \"Admin fee\"), __jsx(\"span\", null, \"Brokerage fee\"), __jsx(\"span\", null, \"Security fee\"), __jsx(\"span\", null, \"action\")), leases.map(lease => {\n      return __jsx(Container, {\n        key: lease.id,\n        row: true,\n        space: \"space-between\",\n        customStyles: {\n          padding: 10,\n          cursor: \"pointer\",\n          borderTop: `1px solid ${fade(\"#393939\", 0.1)}`,\n          \"&:hover\": {\n            backgroundColor: ` ${fade(\"#FEFEFF\", 1)}`\n          }\n        }\n      }, __jsx(\"span\", null, lease.lease_name), __jsx(\"span\", null, lease.admin_fee), __jsx(\"span\", null, lease.brokerage_fee), __jsx(\"span\", null, lease.security_deposit), __jsx(Container, {\n        row: true,\n        right: true,\n        center: true\n      }, __jsx(DeleteParentHouse, {\n        id: lease.id\n      })));\n    }), __jsx(Container, {\n      row: true,\n      center: true,\n      customStyles: {\n        padding: 10,\n        borderTop: `1px solid ${fade(\"#393939\", 0.1)}`\n      },\n      middle: true\n    }, __jsx(Typography, null, \"showing \" + leases.length + \" result(s)\")))));\n  }\n\n}\n\nconst LeaseList = withStyles({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: 200\n  },\n  input: {\n    marginLeft: 10,\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  },\n  divider: {\n    height: 28,\n    margin: 4\n  }\n})(Lease);\n\nclass LeaseInfo extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      lease_name: \"\",\n      admin_fee: parseInt(0),\n      brokerage_fee: parseInt(0),\n      security_deposit: parseInt(0),\n      houseId: null,\n      showForm: false\n    });\n\n    _defineProperty(this, \"createForm\", () => {\n      this.setState({\n        showForm: true\n      });\n    });\n\n    _defineProperty(this, \"closeCreateForm\", () => {\n      this.setState({\n        showForm: false\n      });\n    });\n\n    _defineProperty(this, \"handleChange\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n\n    _defineProperty(this, \"CreateFormWrapper\", () => {\n      const {\n        lease_name,\n        admin_fee,\n        brokerage_fee,\n        security_deposit,\n        houseId,\n        showForm\n      } = this.state;\n      const {\n        classes\n      } = this.props;\n      return __jsx(FadeWrapper, {\n        in: showForm\n      }, __jsx(Container, {\n        flex: 1,\n        column: true,\n        customStyles: {\n          zIndex: 1305,\n          paddingTop: 64\n        }\n      }, __jsx(Container, {\n        row: true,\n        center: true,\n        space: \"space-between\",\n        customStyles: {\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          paddingLeft: 10,\n          paddingRight: 15,\n          height: 64,\n          borderBottom: `0.5px solid ${fade(\"#393939\", 0.2)}`\n        }\n      }, __jsx(\"div\", null), __jsx(Typography, {\n        variant: \"button\",\n        style: {\n          fontSize: 13,\n          fontFamily: 400\n        }\n      }, \"Create Lease\"), __jsx(\"span\", {\n        onClick: this.closeCreateForm,\n        style: {\n          fontSize: 30,\n          fontWeight: 200,\n          cursor: \"pointer\"\n        }\n      }, \"\\xD7\")), __jsx(Houses, null, ({\n        data,\n        loading,\n        error\n      }) => {\n        if (data) {\n          const houses = data.getUserHouses;\n          return __jsx(Container, {\n            flex: 1,\n            column: true\n          }, __jsx(Mutation, {\n            mutation: CREATE_LEASE_INFO_MUTATION,\n            refetchQueries: [{\n              query: GET_USER_HOUSES_LEASES\n            }],\n            variables: {\n              lease_name,\n              admin_fee: parseInt(admin_fee),\n              brokerage_fee: parseInt(brokerage_fee),\n              security_deposit: parseInt(security_deposit),\n              houseId\n            }\n          }, (createLeaseInfo, {\n            loading,\n            error\n          }) => {\n            return __jsx(Container, {\n              flex: 1,\n              color: \"inherit\",\n              role: \"presentation\"\n            }, __jsx(\"form\", {\n              method: \"post\",\n              style: {\n                display: \"flex\",\n                flexDirection: \"column\",\n                justifyContent: \"center\",\n                flex: 1\n              },\n              onSubmit: async e => {\n                e.preventDefault();\n                await createLeaseInfo().then(res => {\n                  this.closeCreateForm();\n                });\n                this.setState({\n                  lease_name: \"\",\n                  admin_fee: \"\",\n                  brokerage_fee: \"\",\n                  security_deposit: \"\",\n                  houseId: null\n                });\n              }\n            }, error && error.graphQLErrors.map(({\n              message\n            }, i) => __jsx(\"p\", {\n              key: i,\n              style: {\n                color: \"red\"\n              }\n            }, message)), __jsx(Container, {\n              column: true,\n              middle: true\n            }, __jsx(Container, {\n              middle: true,\n              row: true,\n              center: true,\n              customStyles: {\n                paddingTop: 15,\n                marginTop: 30\n              }\n            }, __jsx(\"span\", null, \" Select House:\"), __jsx(FormControl, {\n              size: \"small\",\n              variant: \"outlined\",\n              className: classes.formControl\n            }, __jsx(Select, {\n              native: true,\n              size: \"normal\",\n              value: houseId,\n              style: {\n                marginLeft: 15\n              },\n              onChange: e => {\n                this.setState({\n                  houseId: e.target.value\n                });\n              },\n              inputProps: {\n                name: \"house\",\n                id: \"outlined-lease-house-id\"\n              }\n            }, __jsx(\"option\", null, \"choose house\"), houses.map(house => __jsx(\"option\", {\n              key: house.id,\n              value: house.id\n            }, house.house_heading))))), __jsx(Slide, {\n              bottom: true,\n              when: houseId !== null\n            }, __jsx(Container, {\n              column: true,\n              middle: true,\n              center: true\n            }, __jsx(Input, {\n              type: \"text\",\n              name: \"lease\",\n              label: \"lease name\",\n              value: lease_name,\n              style: {\n                width: \"50%\",\n                marginTop: 40,\n                marginBottom: 20\n              },\n              onChange: e => {\n                this.setState({\n                  lease_name: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"admin\",\n              label: \"admin fee\",\n              value: admin_fee,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: e => {\n                this.setState({\n                  admin_fee: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"brokerage\",\n              label: \"brokerage fee\",\n              value: brokerage_fee,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: e => {\n                this.setState({\n                  brokerage_fee: e.target.value\n                });\n              }\n            }), __jsx(Input, {\n              type: \"number\",\n              name: \"security\",\n              label: \"security fee\",\n              value: security_deposit,\n              style: {\n                width: \"50%\",\n                marginBottom: 20\n              },\n              onChange: e => {\n                this.setState({\n                  security_deposit: e.target.value\n                });\n              }\n            })))), __jsx(Container, {\n              right: true,\n              center: true,\n              row: true,\n              flex: 1,\n              space: \"space-between\",\n              customStyles: {\n                position: \"absolute\",\n                bottom: 0,\n                marginTop: 15,\n                padding: 10,\n                borderTop: `0.5px solid ${fade(\"#393939\", 0.2)}`,\n                width: \"100%\"\n              }\n            }, __jsx(FlatButton, {\n              type: \"submit\"\n            }, \"\\\"Save\\\"\"))));\n          }));\n        }\n\n        return null;\n      })));\n    });\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    const {\n      showForm\n    } = this.state;\n    return __jsx(Container, {\n      flex: 1\n    }, !showForm && __jsx(Leases, null, ({\n      data,\n      loading\n    }) => {\n      if (data) {\n        const leases = data.getLeases;\n\n        if (leases.length !== 0) {\n          return __jsx(LeaseList, {\n            leases: leases,\n            create: this.createForm,\n            showForm: showForm\n          });\n        }\n\n        if (leases.length === 0) {\n          return __jsx(Container, {\n            flex: 1,\n            column: true,\n            middle: true,\n            center: true\n          }, __jsx(LeaseIcon, {\n            style: {\n              fontSize: 60,\n              color: \"gray\"\n            }\n          }), __jsx(Typography, {\n            variant: \"button\",\n            style: {\n              fontSize: 18,\n              color: \"black\",\n              fontWeight: 600,\n              marginTop: 15\n            }\n          }, \"Create Lease Info\"), __jsx(Typography, {\n            style: {\n              fontSize: 13,\n              fontWeight: 200,\n              marginTop: 10\n            }\n          }, \"Make sure to create house first\"), __jsx(Typography, {\n            style: {\n              fontSize: 13,\n              fontWeight: 200,\n              marginBottom: 15\n            }\n          }, \"in order to attach lease information\"), __jsx(FlatButton, {\n            onClick: this.createForm\n          }, \"New\"));\n        }\n      }\n\n      if (loading) {\n        return __jsx(Container, {\n          flex: 1,\n          middle: true,\n          center: true\n        }, __jsx(\"img\", {\n          src: loadingImg,\n          style: {\n            width: 25,\n            height: 25\n          }\n        }));\n      }\n\n      return null;\n    }), this.CreateFormWrapper());\n  }\n\n}\n\nexport default withStyles(styles)(LeaseInfo);","map":null,"metadata":{},"sourceType":"module"}