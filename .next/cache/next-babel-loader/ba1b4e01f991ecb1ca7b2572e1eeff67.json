{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport Router from \"next/router\";\nimport hasLogo from \"../../public/static/HAS.png\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../queryComponents/User\";\nimport { Container, Input, ActionButton, PrimaryButton } from \"../styledComponents\";\nimport loadingImg from \"../../public/static/126.gif\";\nconst SIGNUP_MUTATION = gql`\n  mutation SIGNUP_MUTATION(\n    $user_name: String!\n    $email: String!\n    $password: String!\n  ) {\n    signup(user_name: $user_name, email: $email, password: $password) {\n      id\n      user_name\n      email\n    }\n  }\n`;\n\nclass Registration extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      user_name: \"\",\n      email: \"\",\n      password: \"\"\n    });\n\n    _defineProperty(this, \"handleChange\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n  }\n\n  render() {\n    const {\n      user_name,\n      email,\n      password\n    } = this.state;\n    return __jsx(Container, {\n      flex: 1,\n      column: true\n    }, __jsx(Container, {\n      middle: true,\n      center: true\n    }, __jsx(\"img\", {\n      src: hasLogo,\n      style: {\n        width: \"7%\",\n        height: \"7%\"\n      }\n    })), __jsx(Container, {\n      middle: true,\n      center: true,\n      flex: 1,\n      column: true,\n      customStyles: {\n        minHeight: \"50vh\"\n      }\n    }, __jsx(Container, {\n      middle: true,\n      center: true\n    }, __jsx(\"h3\", null, \"Create your account\")), __jsx(Mutation, {\n      mutation: SIGNUP_MUTATION,\n      variables: this.state,\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }]\n    }, (signup, {\n      loading\n    }) => {\n      return __jsx(\"form\", {\n        method: \"post\",\n        onSubmit: async e => {\n          e.preventDefault();\n          const res = await signup();\n\n          if (res) {\n            Router.replace(\"/landlord/welcome\");\n          }\n\n          this.setState({\n            user_name: \"\",\n            email: \"\",\n            password: \"\"\n          });\n        }\n      }, __jsx(\"fieldset\", {\n        disabled: loading,\n        \"aria-busy\": loading,\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          border: \"none\",\n          width: 200\n        }\n      }, __jsx(Container, {\n        column: true,\n        middle: true,\n        center: true\n      }, __jsx(Input, {\n        id: \"input_email\",\n        label: \"E-mail\",\n        type: \"email\",\n        name: \"email\",\n        style: {\n          marginBottom: 10,\n          width: 200\n        },\n        placeholder: \"enter email\",\n        value: email,\n        onChange: e => {\n          this.setState({\n            email: e.target.value\n          });\n        }\n      }), __jsx(Input, {\n        id: \"user_name\",\n        label: \"User name\",\n        type: \"text\",\n        name: \"user_name\",\n        placeholder: \"enter username\",\n        style: {\n          marginBottom: 10,\n          width: 200\n        },\n        value: user_name,\n        onChange: e => {\n          this.setState({\n            user_name: e.target.value\n          });\n        }\n      }), __jsx(Input, {\n        id: \"input_password\",\n        label: \"Password\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"enter password\",\n        style: {\n          marginBottom: 10,\n          width: 200\n        },\n        value: password,\n        onChange: this.handleChange\n      }))), __jsx(Container, {\n        space: \"space-between\",\n        row: true,\n        center: true,\n        customStyles: {\n          paddingLeft: 10,\n          paddingRight: 10\n        }\n      }, __jsx(Link, {\n        href: \"/landlord/login\"\n      }, __jsx(\"a\", null, \"login to your account\")), __jsx(Container, null, __jsx(PrimaryButton, {\n        type: \"submit\"\n      }, loading ? __jsx(\"img\", {\n        src: loadingImg,\n        style: {\n          width: 20,\n          height: 20\n        },\n        alt: \"loading...\"\n      }) : \"Register\"))));\n    })));\n  }\n\n}\n\nexport default Registration;","map":null,"metadata":{},"sourceType":"module"}