{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_PARENT_HOUSE_MUTATION(\\n    $building_name: String!\\n    $address: String\\n    $image: String\\n  ) {\\n    createParentHouse(\\n      building_name: $building_name\\n      address: $address\\n      image: $image\\n    ) {\\n      id\\n      building_name\\n      address\\n      image\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { withStyles, fade } from \"@material-ui/core/styles\";\nimport { Mutation } from \"react-apollo\";\nimport { Select, Button, Avatar, IconButton, Typography, Fade, Paper, InputBase, Divider } from \"@material-ui/core\";\nimport gql from \"graphql-tag\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport BuildingIcon from \"@material-ui/icons/Apartment\";\nimport { theme as customTheme } from \"../../../Page\";\nimport loadingImg from \"../../../../public/static/126.gif\";\nimport { Container, FlatButton, Input } from \"../../../styledComponents\";\nimport ParentHouses from \"../../../queryComponents/ParentHouses\";\nimport { GET_USER_PARENT_HOUSES } from \"../../../queryComponents/ParentHouses\";\nimport DeleteParentHouse from \"../DeleteParentHouse\";\nvar CREATE_PARENT_HOUSE_MUTATION = gql(_templateObject());\n\nvar styles = function styles(theme) {\n  return {\n    list: {\n      width: \"100%\",\n      alignItems: \"center\"\n    },\n    formControl: {\n      marginTop: theme.spacing(2),\n      maxWidth: 120\n    },\n    button: {\n      margin: theme.spacing(1)\n    },\n    input: {\n      display: \"none\"\n    },\n    search: _defineProperty({\n      position: \"relative\",\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25)\n      },\n      marginRight: theme.spacing(2),\n      marginLeft: 0,\n      width: \"100%\"\n    }, theme.breakpoints.up(\"sm\"), {\n      marginLeft: theme.spacing(3),\n      width: \"auto\"\n    })\n  };\n};\n\nvar Buildings = /*#__PURE__*/function (_React$Component) {\n  _inherits(Buildings, _React$Component);\n\n  var _super = _createSuper(Buildings);\n\n  function Buildings() {\n    _classCallCheck(this, Buildings);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Buildings, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          buildings = _this$props.buildings,\n          create = _this$props.create,\n          showForm = _this$props.showForm;\n      return __jsx(Container, {\n        column: true,\n        flex: 1\n      }, __jsx(Container, {\n        row: true,\n        space: \"space-between\",\n        customStyles: {\n          padding: 10\n        }\n      }, __jsx(Paper, {\n        component: \"form\",\n        className: classes.root,\n        elevation: 0\n      }, __jsx(InputBase, {\n        className: classes.input,\n        placeholder: \"Search buildings\" // inputProps={{ \"aria-label\": \"search google maps\" }}\n\n      }), __jsx(Divider, {\n        className: classes.divider,\n        orientation: \"vertical\"\n      }), __jsx(IconButton, {\n        type: \"submit\",\n        className: classes.iconButton,\n        \"aria-label\": \"search\"\n      }, __jsx(SearchIcon, null))), __jsx(FlatButton, {\n        onClick: function onClick() {\n          create();\n        }\n      }, \"New Building\")), __jsx(Container, {\n        flex: 1,\n        column: true\n      }, __jsx(Container, {\n        column: true,\n        customStyles: {\n          width: \"100%\",\n          borderRadius: 2,\n          border: \"1px solid \".concat(fade(\"#393939\", 0.1))\n        }\n      }, __jsx(Container, {\n        row: true,\n        space: \"space-between\",\n        customStyles: {\n          padding: 10\n        }\n      }, __jsx(\"span\", null, \"Name\"), __jsx(\"span\", null, \"address\"), __jsx(\"span\", null, \"action\")), buildings.map(function (building) {\n        return __jsx(Container, {\n          key: building.id,\n          row: true // color=\"#FEFEFF\"\n          ,\n          space: \"space-between\",\n          customStyles: {\n            padding: 10,\n            cursor: \"pointer\",\n            borderTop: \"1px solid \".concat(fade(\"#393939\", 0.1)),\n            \"&:hover\": {\n              backgroundColor: \" \".concat(fade(\"#FEFEFF\", 1))\n            }\n          }\n        }, __jsx(\"span\", null, building.building_name), __jsx(\"span\", null, building.address), __jsx(Container, {\n          row: true,\n          right: true,\n          center: true\n        }, __jsx(DeleteParentHouse, {\n          id: building.id\n        })));\n      }), __jsx(Container, {\n        row: true,\n        center: true,\n        customStyles: {\n          padding: 10,\n          borderTop: \"1px solid \".concat(fade(\"#393939\", 0.1))\n        },\n        middle: true\n      }, __jsx(Typography, null, \"showing \" + buildings.length + \" result(s)\")))));\n    }\n  }]);\n\n  return Buildings;\n}(React.Component);\n\nvar BuildingsList = withStyles({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    width: 200\n  },\n  input: {\n    marginLeft: 10,\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  },\n  divider: {\n    height: 28,\n    margin: 4\n  }\n})(Buildings);\n\nvar CreateParentHouse = /*#__PURE__*/function (_React$Component2) {\n  _inherits(CreateParentHouse, _React$Component2);\n\n  var _super2 = _createSuper(CreateParentHouse);\n\n  function CreateParentHouse() {\n    var _this;\n\n    _classCallCheck(this, CreateParentHouse);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super2.call.apply(_super2, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      building_name: \"\",\n      address: \"\",\n      image: null,\n      showForm: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createForm\", function () {\n      _this.setState({\n        showForm: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"closeCreateForm\", function () {\n      _this.setState({\n        showForm: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"uploadImage\", function _callee(e) {\n      var files, data, res, file;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              files = e.target.files;\n              data = new FormData();\n              data.append(\"file\", files[0]);\n              data.append(\"upload_preset\", \"house_assist\");\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(fetch(\"https://api.cloudinary.com/v1_1/dsubmyluz/image/upload/\", {\n                method: \"POST\",\n                body: data\n              }));\n\n            case 6:\n              res = _context.sent;\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 9:\n              file = _context.sent;\n\n              if (file) {\n                _this.setState({\n                  image: file.secure_url\n                });\n              }\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"CreateFormWrapper\", function () {\n      var _this$state = _this.state,\n          building_name = _this$state.building_name,\n          address = _this$state.address,\n          image = _this$state.image,\n          showForm = _this$state.showForm;\n      var classes = _this.props.classes;\n      return __jsx(Fade, {\n        \"in\": showForm\n      }, __jsx(Container, {\n        flex: 1,\n        column: true,\n        customStyles: {\n          zIndex: 1305,\n          paddingTop: 64\n        }\n      }, __jsx(Container, {\n        row: true,\n        center: true,\n        space: \"space-between\",\n        customStyles: {\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          paddingLeft: 10,\n          paddingRight: 15,\n          height: 64,\n          border: \"0.5px solid \".concat(fade(\"#393939\", 0.2))\n        }\n      }, __jsx(\"div\", null), __jsx(Typography, {\n        variant: \"button\",\n        style: {\n          fontSize: 13,\n          fontFamily: 400\n        }\n      }, \"Create Building\"), __jsx(\"span\", {\n        onClick: _this.closeCreateForm,\n        style: {\n          fontSize: 30,\n          fontWeight: 200,\n          cursor: \"pointer\"\n        }\n      }, \"\\xD7\")), __jsx(Container, {\n        flex: 1,\n        column: true\n      }, __jsx(Mutation, {\n        mutation: CREATE_PARENT_HOUSE_MUTATION,\n        refetchQueries: [{\n          query: GET_USER_PARENT_HOUSES\n        }],\n        variables: _this.state\n      }, function (createParentHouse, _ref) {\n        var loading = _ref.loading,\n            error = _ref.error;\n        return __jsx(Container, {\n          flex: 1,\n          color: \"inherit\",\n          role: \"presentation\"\n        }, __jsx(\"form\", {\n          method: \"post\",\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            // justifyContent: \"center\",\n            // alignItems: \"center\",\n            flex: 1\n          },\n          onSubmit: function _callee2(e) {\n            return _regeneratorRuntime.async(function _callee2$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    e.preventDefault();\n                    _context2.next = 3;\n                    return _regeneratorRuntime.awrap(createParentHouse().then(function (res) {\n                      _this.closeCreateForm();\n                    }));\n\n                  case 3:\n                    _this.setState({\n                      building_name: \"\",\n                      address: \"\",\n                      image: null // showForm: false\n\n                    });\n\n                  case 4:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, null, null, null, Promise);\n          }\n        }, error && error.graphQLErrors.map(function (_ref2, i) {\n          var message = _ref2.message;\n          return __jsx(\"p\", {\n            key: i,\n            style: {\n              color: \"red\"\n            }\n          }, message);\n        }), __jsx(Container, {\n          column: true,\n          center: true\n        }, __jsx(Input, {\n          type: \"text\",\n          name: \"building\",\n          label: \"building name\",\n          value: building_name,\n          style: {\n            width: \"50%\",\n            marginTop: 40,\n            marginBottom: 20\n          },\n          onChange: function onChange(e) {\n            _this.setState({\n              building_name: e.target.value\n            });\n          }\n        }), __jsx(Container, {\n          row: true\n        }, __jsx(Input, {\n          accept: \"image/*\",\n          id: \"text-button-file\",\n          multiple: true,\n          type: \"file\" // value={image}\n          ,\n          onChange: _this.uploadImage\n        }), image !== null && __jsx(\"img\", {\n          src: image,\n          style: {\n            width: 40,\n            height: 35,\n            objectFit: \"fit\"\n          }\n        }))), __jsx(Container, {\n          right: true,\n          center: true,\n          row: true,\n          flex: 1,\n          space: \"space-between\",\n          customStyles: {\n            position: \"absolute\",\n            bottom: 0,\n            marginTop: 15,\n            padding: 10,\n            borderTop: \"0.5px solid \".concat(fade(\"#393939\", 0.2)),\n            width: \"100%\"\n          }\n        }, __jsx(FlatButton, {\n          type: \"submit\"\n        }, loading ? __jsx(\"img\", {\n          src: loadingImg,\n          style: {\n            width: 20,\n            height: 20\n          }\n        }) : \"Save\"))));\n      }))));\n    });\n\n    return _this;\n  }\n\n  _createClass(CreateParentHouse, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      var showForm = this.state.showForm;\n      return __jsx(Container, {\n        flex: 1\n      }, !showForm && __jsx(ParentHouses, null, function (_ref3) {\n        var data = _ref3.data,\n            loading = _ref3.loading;\n\n        if (data) {\n          var buildings = data.getUserParentHouses;\n\n          if (buildings.length !== 0) {\n            return __jsx(BuildingsList, {\n              buildings: buildings,\n              create: _this2.createForm,\n              showForm: showForm\n            });\n          }\n\n          if (buildings.length === 0) {\n            return __jsx(Container, {\n              flex: 1\n            }, __jsx(Container, {\n              flex: 1,\n              column: true,\n              middle: true,\n              center: true,\n              customStyles: {\n                paddingTop: 64\n              }\n            }, __jsx(BuildingIcon, {\n              style: {\n                fontSize: 60,\n                color: \"gray\"\n              }\n            }), __jsx(Typography, {\n              variant: \"button\",\n              style: {\n                fontSize: 18,\n                color: \"black\",\n                fontWeight: 600,\n                marginTop: 15\n              }\n            }, \"Add New Building\"), __jsx(Typography, {\n              style: {\n                fontSize: 13,\n                fontWeight: 200,\n                marginTop: 10\n              }\n            }, \"You have more than one house with in a\"), __jsx(Typography, {\n              style: {\n                fontSize: 13,\n                fontWeight: 200,\n                marginBottom: 15\n              }\n            }, \"single building, add them in to a building\"), __jsx(FlatButton, {\n              onClick: _this2.createForm\n            }, \"Add Building\")));\n          }\n        }\n\n        if (loading) {\n          return __jsx(Container, {\n            flex: 1,\n            middle: true,\n            center: true\n          }, __jsx(\"img\", {\n            src: loadingImg,\n            style: {\n              width: 25,\n              height: 25\n            }\n          }));\n        }\n\n        return null;\n      }), this.CreateFormWrapper());\n    }\n  }]);\n\n  return CreateParentHouse;\n}(React.Component);\n\nexport default withStyles(styles)(CreateParentHouse);","map":null,"metadata":{},"sourceType":"module"}