{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Router from \"next/router\";\nimport hasLogo from \"../../public/static/HAS.png\";\nimport { Mutation } from \"react-apollo\";\nimport gql from \"graphql-tag\";\nimport { CURRENT_USER_QUERY } from \"../queryComponents/User\";\nimport { Divider } from \"@material-ui/core\";\nimport { Container, Input, PrimaryButton, ActionButton, SubHeader } from \"../styledComponents\";\nimport loadingImg from \"../../public/static/126.gif\";\nconst LOGIN_MUTATION = gql`\n  mutation LOGIN_MUTATION($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      id\n      user_name\n      email\n    }\n  }\n`;\nconst styles = {\n  divider: {\n    height: 3,\n    width: \"20%\",\n    margin: 4,\n    backgroundColor: \"#0078D4\"\n  }\n};\n\nclass Sign_in extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      email: \"\",\n      password: \"\"\n    });\n\n    _defineProperty(this, \"handleChange\", e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    });\n  }\n\n  render() {\n    const {\n      email,\n      password\n    } = this.state;\n    return __jsx(Container, {\n      flex: 1,\n      column: true,\n      color: \"#EAECEE\",\n      customStyles: {\n        height: \"100%\"\n      }\n    }, __jsx(Container, {\n      middle: true,\n      center: true,\n      flex: 1,\n      color: \"#EAECEE\",\n      column: true,\n      customStyles: {\n        minHeight: \"100vh\",\n        paddingTop: 60\n      }\n    }, __jsx(Container, {\n      depth: 16,\n      flex: 0.6,\n      column: true,\n      customStyles: {\n        width: \"35%\",\n        borderRadius: 5,\n        paddingLeft: 40,\n        paddingRight: 40\n      }\n    }, __jsx(Container, {\n      middle: true,\n      center: true\n    }, __jsx(\"img\", {\n      src: hasLogo,\n      style: {\n        width: \"25%\",\n        height: \"25%\"\n      }\n    })), __jsx(Container, {\n      column: true,\n      middle: true,\n      center: true,\n      flex: 0.2\n    }, __jsx(SubHeader, null, \"Agent login\"), __jsx(Divider, {\n      className: this.props.classes.divider,\n      orientation: \"horizontal\"\n    })), __jsx(Mutation, {\n      mutation: LOGIN_MUTATION,\n      variables: this.state,\n      refetchQueries: [{\n        query: CURRENT_USER_QUERY\n      }]\n    }, (login, {\n      error,\n      loading\n    }) => {\n      return __jsx(\"form\", {\n        style: {\n          position: \"relative\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          flex: 0.8\n        },\n        method: \"post\",\n        onSubmit: async e => {\n          e.preventDefault();\n          const res = await login();\n\n          if (res) {\n            Router.replace(\"/landlord/dashboard\");\n          }\n\n          this.setState({\n            email: \"\",\n            password: \"\"\n          });\n        }\n      }, __jsx(\"fieldset\", {\n        disabled: loading,\n        \"aria-busy\": loading,\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          border: \"none\",\n          width: \"100%\"\n        }\n      }, error && error.graphQLErrors.map(({\n        message\n      }, i) => __jsx(\"p\", {\n        key: i,\n        style: {\n          color: \"red\"\n        }\n      }, message)), __jsx(Container, {\n        flex: 1,\n        middle: true,\n        center: true\n      }, __jsx(Input, {\n        id: \"email\",\n        label: \"E-mail\",\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"enter email\",\n        style: {\n          marginBottom: 10,\n          width: 300\n        },\n        value: email,\n        onChange: this.handleChange\n      })), __jsx(Container, {\n        middle: true,\n        center: true\n      }, __jsx(Input, {\n        id: \"password\",\n        label: \"Password\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"enter password\",\n        style: {\n          marginBottom: 10,\n          width: 300\n        },\n        value: password,\n        onChange: this.handleChange\n      }))), __jsx(Container, {\n        space: \"space-between\",\n        row: true,\n        center: true,\n        customStyles: {\n          width: \"100%\",\n          // position: \"absolute\",\n          backgroundColor: \"transparent\",\n          // bottom: 0,\n          paddingLeft: 35,\n          paddingRight: 35\n        }\n      }, __jsx(Link, {\n        href: \"/landlord/signup\"\n      }, __jsx(\"a\", null, __jsx(ActionButton, null, \"Create account\"))), __jsx(Container, null, __jsx(PrimaryButton, {\n        type: \"submit\"\n      }, loading ? __jsx(\"img\", {\n        src: loadingImg,\n        style: {\n          width: 20,\n          height: 20\n        },\n        alt: \"loading...\"\n      }) : \"Login\"))));\n    }))));\n  }\n\n}\n\nexport default withStyles(styles)(Sign_in);","map":null,"metadata":{},"sourceType":"module"}