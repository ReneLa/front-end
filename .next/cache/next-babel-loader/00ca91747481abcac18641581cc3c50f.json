{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation ADD_HOUSE_TENANT_MUTATION($houseId: ID!, $tenantId: ID!) {\\n    addHouseTenant(houseId: $houseId, tenantId: $tenantId) {\\n      id\\n      firstName\\n      lastName\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Container, ActionButton, IconButton, Text, Input, TextInput, SubText, CaptionText, PrimaryButton, Header, SubHeader } from \"../../styledComponents\";\nimport gql from \"graphql-tag\";\nimport { ApolloConsumer, Mutation } from \"react-apollo\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport userPhoto from \"../../../public/static/sandy.jpeg\";\nimport CheckIcon from \"@material-ui/icons/Done\";\nimport HouseIcon from \"@material-ui/icons/Home\";\nimport { withStyles, makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { Button, Typography, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Avatar, Divider } from \"@material-ui/core\";\nimport { GET_LANDLORD_TENANTS } from \"../../queryComponents/landlord/LandlordTenants\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport AddIcon from \"@material-ui/icons/AddCircleOutline\";\nimport Add from \"@material-ui/icons/Add\";\nimport loadingImg from \"../../../public/static/126.gif\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    dialogPaper: {\n      height: 700,\n      width: 500,\n      borderRadius: 2,\n      backgroundColor: \"white\",\n      position: \"relative\"\n    },\n    dialogActionStyle: {\n      padding: 0,\n      margin: 0,\n      border: \"none\",\n      backgroundColor: \"white\"\n    },\n    dialogActions: {\n      position: \"absolute\",\n      width: \"100%\",\n      bottom: 0,\n      padding: 10,\n      margin: 0,\n      border: \"none\" // backgroundColor: \"red\",\n\n    },\n    dialogContentStyle: {\n      display: \"flex\",\n      padding: 0,\n      border: \"none\",\n      backgroundColor: \"white\"\n    },\n    avatarStyle: {\n      width: theme.spacing(5),\n      height: theme.spacing(5),\n      borderRadius: 1,\n      backgroundColor: \"#F3F2F1\"\n    },\n    buildingImageStyle: {\n      width: theme.spacing(5),\n      height: theme.spacing(5),\n      borderRadius: 2,\n      marginRight: 20,\n      border: \"1.5px dashed #F3F2F1\",\n      backgroundColor: \"#F3F2F1\"\n    },\n    inputStyle: {\n      border: 0,\n      borderRadius: 4,\n      paddingTop: 10,\n      paddingRight: 10,\n      paddingBottom: 10,\n      paddingLeft: 10,\n      backgroundColor: \"#F5F8FA\",\n      // lineHeight: 2,\n      minHeight: 60,\n      fontSize: 12,\n      \"&:focus\": {\n        border: \"1px solid #4C3AF7\",\n        backgroundColor: \"#FEFEFF\"\n      }\n    }\n  };\n});\nvar ActionBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__ActionBtn\",\n  componentId: \"sc-3wd5u5-0\"\n})([\"display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:\", \";\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.lightGrey;\n});\nvar CloseBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__CloseBtn\",\n  componentId: \"sc-3wd5u5-1\"\n})([\"z-index:1304;display:flex;justify-content:center;align-items:center;align-content:center;padding-right:6px;padding-left:6px;border-radius:2px;background-color:\", \";\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.bgPrimary;\n});\nvar AddBtn = styled(ActionButton).withConfig({\n  displayName: \"AddHouseTenant__AddBtn\",\n  componentId: \"sc-3wd5u5-2\"\n})([\"display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:\", \";\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.lightGrey;\n});\nvar CancelBtn = styled(PrimaryButton).withConfig({\n  displayName: \"AddHouseTenant__CancelBtn\",\n  componentId: \"sc-3wd5u5-3\"\n})([\"border:none;color:\", \";background-color:transparent;&:hover{background-color:\", \";}\"], function (_ref4) {\n  var theme = _ref4.theme;\n  return theme.primaryDark;\n}, function (_ref5) {\n  var theme = _ref5.theme;\n  return theme.lightGrey;\n});\nvar Tag = styled.div.withConfig({\n  displayName: \"AddHouseTenant__Tag\",\n  componentId: \"sc-3wd5u5-4\"\n})([\"display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:20px;background-color:#e1e1e1;padding:4px 15px;margin:0px 2px;\"]);\nvar Form = styled.form.withConfig({\n  displayName: \"AddHouseTenant__Form\",\n  componentId: \"sc-3wd5u5-5\"\n})([\"display:flex;flex-direction:row;padding:0px 40px;\"]);\nvar ADD_HOUSE_TENANT_MUTATION = gql(_templateObject());\n\nvar TenantsContainer = function TenantsContainer(_ref6) {\n  var addTo = _ref6.addTo,\n      tenants = _ref6.tenants,\n      tenantList = _ref6.tenantList,\n      loading = _ref6.loading;\n  var classes = useStyles();\n\n  var handleClick = function handleClick(tenant) {\n    if (!tenants.some(function (current) {\n      return current.id === tenant.id;\n    })) {\n      addTo([tenant]);\n    } else {\n      var tenantAfterRemoval = tenants;\n      tenantAfterRemoval = tenantAfterRemoval.filter(function (current) {\n        return current.id !== tenant.id;\n      });\n      addTo(_toConsumableArray(tenantAfterRemoval));\n    }\n  };\n\n  var isTenantSelected = function isTenantSelected(tenant) {\n    if (tenants.some(function (current) {\n      return current.id === tenant.id;\n    })) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return __jsx(Container, {\n    column: true,\n    customStyles: {\n      padding: \"10px 40px\"\n    },\n    color: \"transparent\"\n  }, loading && __jsx(Container, {\n    flex: 1,\n    middle: true,\n    center: true,\n    column: true,\n    color: \"transparent\"\n  }, __jsx(\"img\", {\n    src: loadingImg,\n    style: {\n      width: 20,\n      height: 20\n    }\n  })), !loading && tenantList && tenantList.map(function (ten) {\n    return __jsx(Container, {\n      flex: false,\n      key: ten.id,\n      column: true,\n      color: \"transparent\"\n    }, __jsx(Container, {\n      color: \"transparent\",\n      row: true,\n      center: true,\n      flex: 1,\n      customStyles: {\n        paddingTop: 15,\n        paddingBottom: 5,\n        paddingLeft: 0,\n        paddingRight: 5\n      }\n    }, __jsx(Container, {\n      row: true,\n      flex: 1,\n      center: true,\n      color: \"transparent\"\n    }, ten.profileImage === null ? __jsx(Avatar, {\n      src: ten.profileImage,\n      className: classes.avatarStyle\n    }, __jsx(SubHeader, null, ten.firstName.charAt(0) + ten.lastName.charAt(0))) : __jsx(Avatar, {\n      src: ten.profileImage,\n      className: classes.avatarStyle\n    }), __jsx(Container, {\n      column: true,\n      flex: 1,\n      color: \"transparent\"\n    }, __jsx(SubHeader, {\n      customStyles: {\n        fontSize: 14,\n        fontWeight: \"600\",\n        marginBottom: 0,\n        marginLeft: 15\n      }\n    }, ten.firstName + \"\" + ten.lastName))), __jsx(AddBtn, {\n      onClick: function onClick() {\n        return handleClick(ten);\n      }\n    }, isTenantSelected(ten) ? __jsx(CheckIcon, {\n      style: {\n        fontSize: 18,\n        color: \"green\"\n      }\n    }) : __jsx(Add, {\n      style: {\n        fontSize: 18\n      }\n    }))));\n  }));\n};\n\nvar AddHouseTenant = function AddHouseTenant(_ref7) {\n  var house = _ref7.house;\n  var classes = useStyles();\n  var theme = useTheme();\n\n  var _useState = useState(null),\n      building_name = _useState[0],\n      setBuildingName = _useState[1];\n\n  var _useState2 = useState(false),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(\"paper\"),\n      scroll = _useState3[0],\n      setScroll = _useState3[1];\n\n  var fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  var _useState4 = useState(false),\n      isloading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState([]),\n      addToTenant = _useState5[0],\n      setAddToTenant = _useState5[1];\n\n  var _useState6 = useState(null),\n      tenantList = _useState6[0],\n      setTenantList = _useState6[1];\n\n  var _useMutation = useMutation(ADD_HOUSE_TENANT_MUTATION, {\n    variables: {\n      houseId: house.id,\n      tenantId: addToTenant.length > 0 ? addToTenant[0].id : \"\"\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      addToHouse = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      data = _useMutation2$.data,\n      loading = _useMutation2$.loading;\n\n  console.log(data);\n\n  var handleClickOpen = function handleClickOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  function getTenants(client) {\n    var res, tenants;\n    return _regeneratorRuntime.async(function getTenants$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(client.query({\n              query: GET_LANDLORD_TENANTS\n            }));\n\n          case 3:\n            res = _context.sent;\n            tenants = res.data.getLandlordTenants;\n            setTenantList(tenants);\n            setLoading(false);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return __jsx(ApolloConsumer, null, function (client) {\n    return __jsx(\"div\", null, __jsx(IconButton, {\n      onClick: function onClick(e) {\n        handleClickOpen();\n        getTenants(client);\n      },\n      customStyles: {\n        backgroundColor: \"#0078D4\",\n        height: 33 //   width: 33,\n\n      }\n    }, __jsx(SubText, {\n      customStyles: {\n        color: \"white\"\n      }\n    }, \"Add\")), __jsx(Dialog, {\n      fullScreen: fullScreen,\n      onClose: function onClose(e) {\n        handleClose();\n      },\n      classes: {\n        paper: classes.dialogPaper\n      },\n      \"aria-labelledby\": \"customized-dialog-title\",\n      open: open,\n      scroll: scroll\n    }, __jsx(DialogTitle, {\n      id: \"scroll-dialog-title\",\n      classes: {\n        root: classes.dialogActionStyle\n      }\n    }, __jsx(Container, {\n      row: true,\n      center: true,\n      right: true,\n      color: \"transparent\",\n      space: \"space-between\",\n      customStyles: {\n        paddingTop: 15,\n        paddingBottom: 7,\n        paddingRight: 10,\n        paddingLeft: 20\n      }\n    }, __jsx(Container, {\n      color: \"transparent\",\n      column: true,\n      row: true,\n      center: true,\n      left: true,\n      flex: 1\n    }, __jsx(SubHeader, null, \"Tenants\")), __jsx(CloseBtn, {\n      onClick: handleClose\n    }, __jsx(CloseIcon, {\n      style: {\n        fontSize: 23\n      }\n    })))), __jsx(DialogContent, {\n      classes: {\n        root: classes.dialogContentStyle\n      }\n    }, __jsx(Container, {\n      flex: 1,\n      column: true,\n      color: \"transparent\",\n      customStyles: {\n        paddingTop: 10,\n        paddingBottom: 10\n      }\n    }, __jsx(TenantsContainer, {\n      loading: isloading,\n      addTo: setAddToTenant,\n      tenants: addToTenant,\n      tenantList: tenantList\n    }))), __jsx(DialogActions, {\n      className: classes.dialogActions\n    }, __jsx(PrimaryButton, {\n      customStyles: {\n        pointerEvents: addToTenant.length <= 0 ? \"none\" : \"auto\",\n        opacity: addToTenant.length <= 0 ? 0.4 : 1.0\n      },\n      onClick: function onClick() {\n        addToHouse();\n      }\n    }, \"ADD\"))));\n  });\n};\n\nexport default AddHouseTenant;","map":null,"metadata":{},"sourceType":"module"}