(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"7h5s":function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var r=n("Ff2n"),o=n("KQm4"),a=n("ODXe"),i=n("h4VS"),l=n("CarD"),c=n.n(l),s=n("8C4M"),d=n.n(s),u=n("x1ji"),p=n.n(u),g=n("lTCR"),f=n.n(g),m=n("q1tI"),h=n.n(m),y=n("vbcS"),S=n("vOnD"),b=n("UIRo"),w=n("o0o1"),x=n.n(w),v=n("lqOT"),k=n("9/5/"),T=n.n(k),C=n("6L5Y"),O=h.a.createElement;function _(){var e=Object(i.a)(["\n  query SEARCH_TICKET_QUERY($searchTerm: String!) {\n    searchUserTickets(searchTerm: $searchTerm) {\n      id\n      title\n      description\n      isClosed\n      reported_way\n      reported_date\n      assignedDate\n      reported_by {\n        id\n        user_name\n        userType\n      }\n      houseId {\n        id\n        house_heading\n        house_description\n        house_no\n      }\n    }\n  }\n"]);return _=function(){return e},e}var j=Object(S.d)(C.d).withConfig({displayName:"SearchTicket__SearchBox",componentId:"oq8ihl-0"})(["display:flex;flex-direction:row;align-items:center;padding-right:10px;background-color:white;height:32px;padding:0px 5px;min-width:150px;margin-left:7px;margin-right:10px;"]),E=f()(_()),R=function(e){var t=e.setFound,n=e.setLoading,r=T()((function(e,r){var o,a;return x.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n(!0),i.next=3,x.a.awrap(r.query({query:E,variables:{searchTerm:e.target.value}}));case 3:o=i.sent,a=o.data.searchUserTickets,t(a),n(!1);case 7:case"end":return i.stop()}}),null,null,null,Promise)}),350);return O(j,null,O(v.a,null,(function(e){return O(C.m,{type:"search",onChange:function(t){t.persist(),r(t,e)},customStyles:{fontSize:15,height:"100%",lineHeight:1,padding:0,width:"100%",border:0,backgroundColor:"white"}})})))},F=n("YdRN"),I=n("rePB"),B=n("kfFl"),A=n("yv+Y"),D=n("EQI2"),L=n("R/WZ"),N=n("tr08"),$=n("lopY"),z=n("bzWV"),q=n("hwPB"),P=h.a.createElement;function W(){var e=Object(i.a)(["\n  mutation CREATE_TICKET_MUTATION(\n    $title: String!\n    $description: String!\n    $reported_way: String\n    $owner_review: String\n    $houseId: ID\n  ) {\n    createTicket(\n      title: $title\n      description: $description\n      reported_way: $reported_way\n      owner_review: $owner_review\n      houseId: $houseId\n    ) {\n      id\n    }\n  }\n"]);return W=function(){return e},e}var H=Object(L.a)((function(e){return Object(I.a)({dialogPaper:{height:700,width:550,borderRadius:2,backgroundColor:"#F2F3F4"},dialogActionStyle:{padding:0,margin:0,border:"none",backgroundColor:"#F2F3F4"},inputStyle:{border:0,borderRadius:1,paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,backgroundColor:"#F5F8FA",minHeight:60,fontSize:12,"&:focus":{border:"1px solid #4C3AF7",backgroundColor:"#FEFEFF"}},dialogActions:{width:"100%",padding:0,margin:0,border:"none"},dialogContentStyle:{display:"flex",flexDirection:"row",marginRight:10,height:"100%",backgroundColor:"white",border:"none"},avatarStyle:{position:"relative",width:e.spacing(12),height:e.spacing(10),borderRadius:5,backgroundColor:"#F3F2F1"}},"inputStyle",{border:0,borderRadius:1,paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,backgroundColor:"#F5F8FA",minHeight:60,fontSize:12,"&:focus":{border:"1px solid #4C3AF7",backgroundColor:"#FEFEFF"}})})),U=Object(S.d)(C.a).withConfig({displayName:"CreateTicket__ActionBtn",componentId:"sc-1d91g92-0"})(["display:flex;justify-content:center;align-items:center;align-content:center;padding-right:10px;padding-left:10px;border-radius:2px;background-color:",";"],(function(e){return e.theme.lightGrey})),Y=(Object(S.d)(C.a).withConfig({displayName:"CreateTicket__CloseBtn",componentId:"sc-1d91g92-1"})(["position:absolute;top:0;right:0;z-index:1304;display:flex;justify-content:center;align-items:center;align-content:center;padding-right:6px;padding-left:6px;border-radius:2px;background-color:",";"],(function(e){return e.theme.bgPrimary})),Object(S.d)(C.l).withConfig({displayName:"CreateTicket__CancelBtn",componentId:"sc-1d91g92-2"})(["border:none;color:",";background-color:transparent;&:hover{background-color:",";}"],(function(e){return e.theme.primaryDark}),(function(e){return e.theme.lightGrey}))),Q=f()(W()),G=function(e){var t=e.reportWay,n=e.setReportWay,r=h.a.useState(null),o=Object(a.a)(r,2),i=o[0],l=o[1],c=Object(m.useState)([{id:1,value:"System"},{id:2,value:"Phone"},{id:3,value:"Email"},{id:4,value:"In person"}]),s=c[0];c[1];return P(C.e,{title:t.length>0?P("div",null,t.map((function(e){return P("span",{key:e.id},e.value+", ")}))):"choose",anchorEl:i,handleOpen:function(e){l(e.currentTarget)},handleClose:function(){l(null)},selection:t,setSelection:n,items:s,wrapperStyles:{width:120}})},K=function(e){var t=e.house,n=e.setHouse,r=h.a.useState(null),o=Object(a.a)(r,2),i=o[0],l=o[1],c=Object(m.useState)([]),s=c[0],d=c[1],u=Object(m.useState)(!1),p=(u[0],u[1]);var g=function(e){var t=[];return e.forEach((function(e,n){var r={id:e.id,value:e.house_heading};t.push(r)})),t},f=function(){l(null)};return P(v.a,null,(function(e){return P(C.d,{column:!0,color:"transparent",customStyles:{marginRight:10,marginBottom:10}},P(C.e,{title:t.length>0?t[0].value:"Add House",anchorEl:i,handleOpen:function(t){return function(e,t){var n,r;return x.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return p(!0),l(e.currentTarget),o.next=4,x.a.awrap(t.query({query:z.a}));case 4:n=o.sent,r=n.data.getUserHouses,d(g(r)),console.log(r);case 8:case"end":return o.stop()}}),null,null,null,Promise)}(t,e)},handleClose:f,selection:t,setSelection:n,items:s,wrapperStyles:{width:100}}))}))},M=function(){var e=H(),t=Object(N.a)(),n=Object(m.useState)(!1),r=n[0],o=n[1],a=Object(m.useState)([]),i=a[0],l=a[1],c=Object(m.useState)("paper"),s=c[0],d=(c[1],Object($.a)(t.breakpoints.down("sm"))),u=Object(m.useState)(null),p=u[0],g=u[1],f=Object(m.useState)(null),h=f[0],S=f[1],b=Object(m.useState)(null),w=b[0],v=b[1],k=Object(m.useState)([]),T=k[0],O=k[1],_=function(){o(!0)},j=function(){o(!1)},E=new Date;E.setDate(E.getDate()+3);E.toISOString().substr(0,10);return P(y.a,{mutation:Q,refetchQueries:[{query:q.a}],variables:{title:p,description:h,reported_way:i.length>0?i[0].value:"",owner_review:w,houseId:T.length>0?T[0].id:""}},(function(t,n){var o=n.loading;n.error;return P("div",null,P(U,{onClick:_},"Create Ticket"),P(B.a,{fullScreen:d,onClose:j,classes:{paper:e.dialogPaper},"aria-labelledby":"customized-dialog-title",open:r,scroll:s},P(A.a,{id:"scroll-dialog-title",classes:{root:e.dialogActionStyle}},P(C.d,{row:!0,center:!0,color:"transparent",space:"space-between",customStyles:{paddingTop:15,paddingBottom:7,paddingRight:10,paddingLeft:20}},P(C.n,null," Create Ticket"),P(Y,{onClick:j},"Cancel"))),P("form",{method:"post",onSubmit:function(e){return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.next=3,x.a.awrap(t().then((function(e){j()})).catch((function(e){alert(e)})));case 3:case"end":return n.stop()}}),null,null,null,Promise)},style:{display:"flex",flexDirection:"row",paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10}},P(D.a,{dividers:"body"===s,style:{flex:1},classes:{root:e.dialogContentStyle}},P("div",{style:{flex:1,width:"100%"}},P(C.d,{row:!0,center:!0,color:"transparent"},P(C.b,{customStyles:{color:"#323130",fontWeight:"600",marginBottom:10}},"Ticket Information")),P(C.d,{color:"transparent",row:!0,space:"space-between"},P(C.d,{flex:.7,customStyles:{paddingRight:10},color:"transparent"},P(C.i,{placeholder:"Ticket title..",type:"text",value:p,onChange:function(e){return g(e.target.value)}})),P(C.d,{color:"transparent",flex:.3,customStyles:{paddingLeft:10}})),P(C.d,{color:"transparent",column:!0,flex:!1,customStyles:{width:"100%"}},P(C.b,{customStyles:{marginBottom:5,color:"#323130"}},"Description"),P("textarea",{type:"text",placeholder:"start typing here...",className:e.inputStyle,value:h,onChange:function(e){return S(e.target.value)}})),P(C.d,{row:!0,flex:1,customStyles:{marginTop:10},color:"transparent"},P(C.d,{column:!0,flex:.5,color:"transparent",customStyles:{paddingRight:5}},P(C.d,{row:!0,center:!0,color:"transparent"},P(C.b,{customStyles:{color:"#323130",fontWeight:"600",marginBottom:8,marginTop:15}},"Landlord Review")),P(C.d,{color:"transparent",column:!0,flex:!1,customStyles:{width:"100%"}},P("textarea",{type:"text",placeholder:"start typing here...",className:e.inputStyle,value:w,onChange:function(e){return v(e.target.value)}}))),P(C.d,{column:!0,flex:.5,color:"transparent",customStyles:{paddingLeft:5}},P(C.d,{row:!0,center:!0,color:"transparent"},P(C.b,{customStyles:{color:"#323130",fontWeight:"600",marginBottom:8,marginTop:15}},"Agent Review")),P(C.d,{color:"transparent",column:!0,flex:!1,customStyles:{width:"100%"}},P("textarea",{type:"text",disabled:!0,placeholder:"start typing here...",className:e.inputStyle})))),P(C.d,{color:"transparent",row:!0,flex:0},P(C.d,{color:"transparent",customStyles:{paddingRight:5},flex:.3},P(C.d,{flex:0,row:!0,center:!0,color:"transparent"},P(C.b,{customStyles:{color:"#323130",fontWeight:"600",marginBottom:8,marginTop:15}},"Add House")),P(C.d,{flex:0,row:!0,center:!0,color:"transparent"},P(K,{house:T,setHouse:O}))),P(C.d,{color:"transparent",customStyles:{paddingRight:5},flex:.3},P(C.d,{flex:0,row:!0,center:!0,color:"transparent"},P(C.b,{customStyles:{color:"#323130",fontWeight:"600",marginBottom:8,marginTop:15}},"Reported way")),P(C.d,{flex:0,row:!0,center:!0,color:"transparent"},P(G,{reportWay:i,setReportWay:l})))),P(C.d,{color:"transparent",right:!0,center:!0,row:!0,flex:!1,customStyles:{paddingTop:30,paddingBottom:5}},P(C.l,{type:"submit",customStyles:{pointerEvents:T.length<=0?"none":"auto",opacity:T.length<=0?.5:1}},o?"saving":"Save Ticket")))))))}))},V=h.a.createElement;function J(){var e=Object(i.a)(["\n  query PAGINATION_QUERY {\n    ticketsConnection {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return J=function(){return e},e}S.d.div.withConfig({displayName:"AllTickets__Tag",componentId:"sc-193fov5-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;border-radius:20px;background-color:#e1e1e1;padding:4px 15px;margin:0px 5px;"]);var X=Object(S.d)(C.h).withConfig({displayName:"AllTickets__PageBtn",componentId:"sc-193fov5-1"})(["display:flex;justify-content:center;align-items:center;align-content:center;border:none;margin-right:5px;height:33px;width:33px;",""],(function(e){return e.activeStyles})),Z=f()(J()),ee=function(e){var t=e.setSkip,n=h.a.useState(1),r=Object(a.a)(n,2),i=r[0],l=r[1];return V(y.b,{query:Z},(function(e){var n=e.data;e.loading,e.error;if(n){var r=n.ticketsConnection.aggregate.count,a=Math.ceil(r/b.b),s=i<=1,u=i>=a;return V(C.d,{flex:1,row:!0,middle:!0,customStyles:{paddingTop:10,paddingBottom:25}},V(C.h,{onClick:function(){return l(i-1),void t(i-1)},customStyles:{border:"1px solid #E1E1E1",marginRight:10,height:33,width:33,pointerEvents:s?"none":"auto",opacity:s?.6:1}},V(c.a,{style:{fontSize:25}})),Object(o.a)(Array(a)).map((function(e,n){var r=n+1;return V(X,{key:n,onClick:function(){l(r),t(r)},activeStyles:{backgroundColor:r===i?"#E1E1E1":"transparent",pointerEvents:r===i?"none":"auto"}},V("span",null,r))})),V(C.h,{onClick:function(){return l(i+1),void t(i+1)},customStyles:{border:"1px solid #E1E1E1",height:33,width:33,marginLeft:5,pointerEvents:u?"none":"auto",opacity:u?.6:1}},V(d.a,{style:{fontSize:25}})))}return null}))};t.b=function(e){var t=e.tickets,n=e.setSkip,o=(Object(r.a)(e,["tickets","setSkip"]),h.a.useState({})),i=Object(a.a)(o,2),l=(i[0],i[1]),c=h.a.useState(!0),s=Object(a.a)(c,2),d=s[0],u=(s[1],h.a.useState(!1)),g=Object(a.a)(u,2),f=(g[0],g[1]),m=h.a.useState(!1),y=Object(a.a)(m,2),S=(y[0],y[1]),b=h.a.useState(null),w=Object(a.a)(b,2),x=w[0],v=w[1],k=function(e){l(e),f(!0)},T=function(){f(!1),l({})};return console.log(t),V(C.d,{flex:1,customStyles:{paddingTop:10,paddingLeft:30,paddingRight:30}},V(C.d,{flex:0,row:!0,center:!0,customStyles:{paddingLeft:15,paddingRight:15}},t&&t.length>0&&V(ee,{setSkip:n}),V(R,{setLoading:S,setFound:v}),V(M,null)),V(C.d,{flex:0,row:!0,center:!0,customStyles:{paddingLeft:15,paddingRight:15}},V(C.d,{center:!0,row:!0,flex:.1,color:"transparent"},V(C.p,{customStyles:{fontSize:14}},"No.")),V(C.d,{center:!0,row:!0,flex:.2,color:"transparent"},V(C.p,{customStyles:{fontSize:14}},"Date")),V(C.d,{center:!0,row:!0,flex:.2,color:"transparent"},V(C.p,{customStyles:{fontSize:15}},"Title")),V(C.d,{center:!0,row:!0,flex:.2,color:"transparent"},V(C.p,{customStyles:{fontSize:15}},"House")),V(C.d,{center:!0,row:!0,flex:.2,color:"transparent"},V(C.p,{customStyles:{fontSize:15}},"Status")),V(C.d,{center:!0,row:!0,right:!0,flex:.1,color:"transparent"},V(C.p,{customStyles:{fontSize:15}},"Actions"))),null===x&&V(h.a.Fragment,null,V(C.d,{customStyles:{paddingTop:10,flexDirection:d?"column":"row"}},t&&t.map((function(e,t){var n=t+1;return V(F.a,{list:d,key:e.id,num:n,ticket:e,handleClose:T,handleOpen:k})}))),t&&t.length<=0&&V(C.d,{flex:1,column:!0,center:!0,middle:!0,customStyles:{minHeight:300}},V(C.n,{customStyles:{marginBottom:20}},"No Tenants found?"),V(p.a,{style:{fontSize:100,color:"#1C2833",marginBottom:20,marginTop:20}}),V(C.b,null,"Try to create one Tenant"))),null!==x&&V(C.d,{flex:1,customStyles:{width:"100%",marginTop:15}},x.map((function(e,t){var n=t+1;return V(F.a,{list:d,key:e.id,num:n,ticket:e,handleClose:T,handleOpen:k})}))),null!==x&&0===x.length&&V(C.d,{flex:1,column:!0,middle:!0,center:!0,customStyles:{flexWrap:"wrap",marginTop:15}},V(C.n,null,"No Tickets Found")))}},hwPB:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("wx14"),o=n("ODXe"),a=n("h4VS"),i=n("q1tI"),l=n.n(i),c=n("vbcS"),s=n("lTCR"),d=n.n(s),u=n("UIRo"),p=l.a.createElement;function g(){var e=Object(a.a)(["\n  query GET_LANDLORD_TICKETS($skip:Int=0,$first:Int=",") {\n    getLandlordTickets(skip:$skip, first:$first,orderBy:createdAt_DESC) {\n      id\n      title\n      description\n      isClosed\n      reported_way\n      reported_date\n      assignedDate\n      reported_by {\n        id\n        user_name\n        userType\n      }\n      houseId {\n        id\n        house_heading\n      }\n      createdAt\n    }\n  }\n"]);return g=function(){return e},e}var f=d()(g(),u.b);t.b=function(e){var t=l.a.useState(1),n=Object(o.a)(t,2),a=n[0],i=n[1];return p(c.b,Object(r.a)({},e,{query:f,variables:{skip:a*u.b-u.b}}),(function(t){return e.children(t,i)}))}}}]);